/*! For license information please see 461.ec2fc42c.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkequate=self.webpackChunkequate||[]).push([[461],{2054:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3165:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},4919:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},6108:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]])},7033:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},8646:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},8927:(e,t,s)=>{function a(e){const t=function(e){return e?e.toDate&&"function"===typeof e.toDate?e.toDate():e.seconds?new Date(1e3*e.seconds):null:null}(e);return t?t.toLocaleString():"N/A"}function r(e){return e?e.toMillis&&"function"===typeof e.toMillis?e.toMillis():e.seconds?1e3*e.seconds:0:0}function l(e){return[...e].sort((e,t)=>{const s=r(e.createdAt);return r(t.createdAt)-s})}s.d(t,{di:()=>r,po:()=>a,qW:()=>l})},8929:(e,t,s)=>{function a(e){if(!e||!e.schedule||0===Object.keys(e.schedule).length)return null;const t=new Date,s=e.schedule,a=t.getDay();if(s[a]){const[e,r]=s[a].split(":").map(Number),o=new Date(t);return o.setHours(e,r,0,0),{date:o,formatted:l(o),dayOfWeek:a}}return null}function r(e){var t;if(!e||!e.schedule||0===Object.keys(e.schedule).length)return null;const s=new Date,a=e.schedule,r=s.getDay();if(a[r]){const[e,t]=a[r].split(":").map(Number),o=new Date(s);return o.setHours(e,t,0,0),o>s?{date:o,formatted:l(o),dayOfWeek:r}:null}let o=null,n=null,i=1/0;for(let l=1;l<=7;l++){const e=(r+l)%7;if(a[e]){const[t,r]=a[e].split(":").map(Number),d=new Date(s);d.setDate(s.getDate()+l),d.setHours(t,r,0,0),l<i&&(i=l,o=d,n=e)}}if(!o){const e=Object.keys(a).map(Number).sort((e,t)=>e-t);if(e.length>0){const t=e[0],l=t>=r?t-r:7-r+t,[i,d]=a[t].split(":").map(Number);o=new Date(s),o.setDate(s.getDate()+l),o.setHours(i,d,0,0),n=t}}return o?{date:o,formatted:l(o),dayOfWeek:null!==(t=n)&&void 0!==t?t:void 0}:null}function l(e){const t=new Date,s=new Date(t);s.setDate(s.getDate()+1);const a=e.toDateString()===t.toDateString(),r=e.toDateString()===s.toDateString(),l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];let o="";if(a)o="Today";else if(r)o="Tomorrow";else{const t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()],s=l[e.getMonth()],a=e.getDate();o="".concat(t,", ").concat(s," ").concat(a)}const n=e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return"".concat(o," at ").concat(n)}s.d(t,{S:()=>r,z:()=>a})},9461:(e,t,s)=>{s.r(t),s.d(t,{default:()=>T});var a=s(5043),r=s(1130),l=s(4918),o=s(3944),n=s(7033),i=s(2555),d=s(1360),m=s(5347),c=s(9292),x=s(6245),b=s(2580),u=s(3165),h=s(6108),p=s(7118),g=s(4919),f=s(614),v=s(7133),j=s(6667),w=s(3107),y=s(8646),N=s(8629),k=s(8927),A=s(579);const _=e=>{let{player:t,playerStats:s,db:l,onClose:n}=e;const[i,d]=(0,a.useState)([]),[c,x]=(0,a.useState)(0);(0,a.useEffect)(()=>{if(!s.pointsHistory||0===s.gamesPlayed)return void x(0);const e=new Set;s.pointsHistory.forEach(t=>{"Played in game"===t.reason&&t.matchDate&&e.add(t.matchDate)});const t=s.gamesPlayed,a=t>0?s.gamesPlayed/t*100:0;x(Math.round(a))},[s]),(0,a.useEffect)(()=>{if(!l)return;(async()=>{try{const e=N.ON.motmAwards(),s=(0,j.rJ)(l,e),a=(0,j.P)(s,(0,j._M)("playerId","==",t.id)),r=await(0,j.GG)(a),o=[...r.docs.map(e=>({gameDate:e.data().gameDate,voteCount:e.data().voteCount||0,awardedAt:e.data().awardedAt}))].sort((e,t)=>{const s=(0,k.di)(e.awardedAt);return(0,k.di)(t.awardedAt)-s});d(o)}catch(e){console.error("Error fetching MOTM awards:",e)}})()},[l,t.id]);const b=(0,a.useMemo)(()=>s.gamesPlayed>0?(s.goals/s.gamesPlayed).toFixed(2):"0.00",[s.goals,s.gamesPlayed]),v=(0,a.useMemo)(()=>s.gamesPlayed>0?(s.assists/s.gamesPlayed).toFixed(2):"0.00",[s.assists,s.gamesPlayed]),w=(0,a.useMemo)(()=>[...s.pointsHistory].sort((e,t)=>{const s=(0,k.di)(e.addedAt);return(0,k.di)(t.addedAt)-s}),[s.pointsHistory]);return(0,A.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center z-[9999] overflow-y-auto animate-in fade-in duration-200",onClick:e=>{e.target===e.currentTarget&&n()},children:(0,A.jsxs)("div",{className:"bg-gradient-to-br from-slate-50/98 via-white/98 to-slate-50/98 backdrop-blur-xl w-[calc(100%-2rem)] max-w-full sm:max-w-4xl mx-4 my-4 sm:my-8 max-h-[90vh] sm:max-h-[85vh] rounded-3xl shadow-[0_25px_70px_rgba(15,23,42,0.4)] border-2 border-indigo-200/60 p-5 sm:p-6 md:p-8 relative overflow-y-auto animate-in slide-in-from-bottom-4 duration-300",onClick:e=>e.stopPropagation(),children:[(0,A.jsxs)("div",{className:"pointer-events-none absolute inset-0 overflow-hidden rounded-3xl",children:[(0,A.jsx)("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-indigo-200/40 rounded-full blur-3xl"}),(0,A.jsx)("div",{className:"absolute -bottom-16 -left-16 w-36 h-36 bg-purple-200/40 rounded-full blur-3xl"})]}),(0,A.jsx)("button",{onClick:n,className:"absolute top-4 right-4 sm:top-5 sm:right-5 z-30 w-10 h-10 sm:w-11 sm:h-11 flex items-center justify-center bg-white/95 backdrop-blur-sm border-2 border-slate-200/60 rounded-full shadow-lg hover:shadow-xl hover:bg-white hover:border-slate-300 transition-all duration-200 hover:scale-110 active:scale-95 group",type:"button","aria-label":"Close modal",children:(0,A.jsx)(f.A,{className:"w-5 h-5 text-slate-600 group-hover:text-slate-800 transition-colors"})}),(0,A.jsxs)("div",{className:"relative z-10",children:[(0,A.jsxs)("div",{className:"mb-6",children:[(0,A.jsx)("h2",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-2",children:t.name}),(0,A.jsxs)("div",{className:"flex items-center gap-4 text-sm text-slate-600",children:[(0,A.jsx)("span",{className:"font-semibold",children:t.position}),(0,A.jsx)("span",{children:"\u2022"}),(0,A.jsxs)("span",{children:["Skill Level: ",t.skillLevel]})]})]}),(0,A.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3 sm:gap-4 mb-6",children:[(0,A.jsxs)("div",{className:"bg-gradient-to-br from-amber-100 to-orange-100 rounded-xl p-4 border-2 border-amber-300",children:[(0,A.jsx)(r.A,{className:"text-amber-600 mb-2",size:24}),(0,A.jsx)("div",{className:"text-2xl font-bold text-amber-700",children:s.totalPoints}),(0,A.jsx)("div",{className:"text-xs font-semibold text-amber-600",children:"Total Points"})]}),(0,A.jsxs)("div",{className:"bg-gradient-to-br from-yellow-100 to-amber-100 rounded-xl p-4 border-2 border-yellow-300",children:[(0,A.jsx)(o.A,{className:"text-yellow-600 mb-2",size:24}),(0,A.jsx)("div",{className:"text-2xl font-bold text-yellow-700",children:s.motmAwards}),(0,A.jsx)("div",{className:"text-xs font-semibold text-yellow-600",children:"MOTM Awards"})]}),(0,A.jsxs)("div",{className:"bg-gradient-to-br from-red-100 to-pink-100 rounded-xl p-4 border-2 border-red-300",children:[(0,A.jsx)(u.A,{className:"text-red-600 mb-2",size:24}),(0,A.jsx)("div",{className:"text-2xl font-bold text-red-700",children:s.goals}),(0,A.jsx)("div",{className:"text-xs font-semibold text-red-600",children:"Goals"})]}),(0,A.jsxs)("div",{className:"bg-gradient-to-br from-blue-100 to-cyan-100 rounded-xl p-4 border-2 border-blue-300",children:[(0,A.jsx)(h.A,{className:"text-blue-600 mb-2",size:24}),(0,A.jsx)("div",{className:"text-2xl font-bold text-blue-700",children:s.assists}),(0,A.jsx)("div",{className:"text-xs font-semibold text-blue-600",children:"Assists"})]}),(0,A.jsxs)("div",{className:"bg-gradient-to-br from-green-100 to-emerald-100 rounded-xl p-4 border-2 border-green-300",children:[(0,A.jsx)(p.A,{className:"text-green-600 mb-2",size:24}),(0,A.jsx)("div",{className:"text-2xl font-bold text-green-700",children:s.gamesPlayed}),(0,A.jsx)("div",{className:"text-xs font-semibold text-green-600",children:"Games Played"})]})]}),(0,A.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[(0,A.jsxs)("div",{className:"bg-slate-100 rounded-xl p-4 border-2 border-slate-300",children:[(0,A.jsx)("div",{className:"text-sm font-semibold text-slate-600 mb-1",children:"Goals per Game"}),(0,A.jsx)("div",{className:"text-2xl font-bold text-slate-800",children:b})]}),(0,A.jsxs)("div",{className:"bg-slate-100 rounded-xl p-4 border-2 border-slate-300",children:[(0,A.jsx)("div",{className:"text-sm font-semibold text-slate-600 mb-1",children:"Assists per Game"}),(0,A.jsx)("div",{className:"text-2xl font-bold text-slate-800",children:v})]}),(0,A.jsxs)("div",{className:"bg-slate-100 rounded-xl p-4 border-2 border-slate-300",children:[(0,A.jsx)("div",{className:"text-sm font-semibold text-slate-600 mb-1",children:"Attendance Rate"}),(0,A.jsxs)("div",{className:"text-2xl font-bold text-slate-800",children:[c,"%"]})]})]}),i.length>0&&(0,A.jsxs)("div",{className:"mb-6",children:[(0,A.jsxs)("h3",{className:"text-xl font-bold text-slate-800 mb-3 flex items-center gap-2",children:[(0,A.jsx)(m.A,{className:"text-yellow-600",size:20}),"Man of the Match Awards"]}),(0,A.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar",children:i.map((e,t)=>(0,A.jsx)("div",{className:"bg-gradient-to-r from-yellow-50 to-amber-50 rounded-lg p-3 border-2 border-yellow-200",children:(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{className:"font-semibold text-yellow-800",children:["Game: ",e.gameDate]}),(0,A.jsxs)("div",{className:"text-xs text-yellow-600",children:[e.voteCount," ",1===e.voteCount?"vote":"votes"]})]}),e.awardedAt&&(0,A.jsx)("div",{className:"text-xs text-slate-500",children:(0,k.po)(e.awardedAt)})]})},t))})]}),w.length>0&&(0,A.jsxs)("div",{className:"mb-6",children:[(0,A.jsxs)("h3",{className:"text-xl font-bold text-slate-800 mb-3 flex items-center gap-2",children:[(0,A.jsx)(g.A,{className:"text-indigo-600",size:20}),"Recent Points History"]}),(0,A.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:w.slice(0,10).map((e,t)=>(0,A.jsx)("div",{className:"bg-slate-50 rounded-lg p-3 border-2 border-slate-200",children:(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("div",{className:"flex-1",children:[(0,A.jsxs)("div",{className:"font-semibold text-slate-800",children:["+",e.points," points"]}),(0,A.jsx)("div",{className:"text-sm text-slate-600",children:e.reason}),e.matchDate&&(0,A.jsxs)("div",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:[(0,A.jsx)(y.A,{size:12}),e.matchDate]})]}),(0,A.jsxs)("div",{className:"text-xs text-slate-500 text-right",children:[e.addedAt&&(0,k.po)(e.addedAt),(0,A.jsxs)("div",{className:"text-xs text-slate-400",children:["by ",e.addedBy||"System"]})]})]})},t))})]})]})]})})};var S=s(8911);const P=e=>{let{standings:t,isLoading:s=!1}=e;return s?(0,A.jsx)("div",{className:"w-full rounded-2xl bg-white/90 backdrop-blur-xl p-6 border-2 border-amber-200 shadow-lg",children:(0,A.jsx)("p",{className:"text-center text-slate-600 font-medium",children:"Loading league table..."})}):0===t.length?(0,A.jsx)("div",{className:"w-full rounded-2xl bg-gradient-to-br from-slate-50 to-amber-50 p-6 border-2 border-dashed border-amber-200 shadow-lg",children:(0,A.jsxs)("div",{className:"text-center",children:[(0,A.jsx)(r.A,{className:"mx-auto text-amber-400 mb-3",size:48}),(0,A.jsx)("p",{className:"text-slate-600 font-medium",children:"No games played yet."}),(0,A.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"League table will appear after game scores are entered."})]})}):(0,A.jsxs)("div",{className:"w-full rounded-2xl bg-white/90 backdrop-blur-xl border-2 border-amber-200 shadow-lg overflow-hidden",children:[(0,A.jsx)("div",{className:"bg-gradient-to-r from-amber-500 to-orange-600 p-3 sm:p-4",children:(0,A.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,A.jsx)(r.A,{className:"text-white",size:24}),(0,A.jsx)("p",{className:"text-white text-sm sm:text-base font-semibold",children:"Win = 3 pts | Draw = 1 pt | Loss = 0 pts"})]})}),(0,A.jsx)("div",{className:"overflow-x-auto",children:(0,A.jsxs)("table",{className:"w-full",children:[(0,A.jsx)("thead",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border-b-2 border-amber-200",children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{className:"px-3 sm:px-4 py-3 text-left text-xs sm:text-sm font-bold text-slate-700 uppercase tracking-wide",children:"Pos"}),(0,A.jsx)("th",{className:"px-3 sm:px-4 py-3 text-left text-xs sm:text-sm font-bold text-slate-700 uppercase tracking-wide",children:"Team"}),(0,A.jsx)("th",{className:"px-2 sm:px-3 py-3 text-center text-xs sm:text-sm font-bold text-slate-700 uppercase tracking-wide",children:"P"}),(0,A.jsx)("th",{className:"px-2 sm:px-3 py-3 text-center text-xs sm:text-sm font-bold text-slate-700 uppercase tracking-wide",children:"W"}),(0,A.jsx)("th",{className:"px-2 sm:px-3 py-3 text-center text-xs sm:text-sm font-bold text-slate-700 uppercase tracking-wide",children:"D"}),(0,A.jsx)("th",{className:"px-2 sm:px-3 py-3 text-center text-xs sm:text-sm font-bold text-slate-700 uppercase tracking-wide",children:"L"}),(0,A.jsx)("th",{className:"px-3 sm:px-4 py-3 text-center text-xs sm:text-sm font-bold text-slate-700 uppercase tracking-wide",children:"Pts"})]})}),(0,A.jsx)("tbody",{className:"divide-y divide-amber-100",children:t.map((e,t)=>(0,A.jsxs)("tr",{className:"hover:bg-amber-50/50 transition-colors ".concat(0===t?"bg-gradient-to-r from-yellow-50 to-amber-50 font-semibold":""),children:[(0,A.jsx)("td",{className:"px-3 sm:px-4 py-3 text-sm sm:text-base",children:(0,A.jsxs)("div",{className:"flex items-center gap-2",children:[0===t&&(0,A.jsx)(r.A,{className:"text-yellow-500",size:16}),1===t&&(0,A.jsx)(r.A,{className:"text-gray-400",size:16}),2===t&&(0,A.jsx)(r.A,{className:"text-orange-600",size:16}),(0,A.jsx)("span",{className:t<3?"font-bold":"",children:t+1})]})}),(0,A.jsx)("td",{className:"px-3 sm:px-4 py-3 text-sm sm:text-base font-medium text-slate-800",children:e.teamName}),(0,A.jsx)("td",{className:"px-2 sm:px-3 py-3 text-center text-sm sm:text-base text-slate-700",children:e.played}),(0,A.jsx)("td",{className:"px-2 sm:px-3 py-3 text-center text-sm sm:text-base text-green-700 font-semibold",children:e.won}),(0,A.jsx)("td",{className:"px-2 sm:px-3 py-3 text-center text-sm sm:text-base text-slate-700",children:e.drawn}),(0,A.jsx)("td",{className:"px-2 sm:px-3 py-3 text-center text-sm sm:text-base text-red-700 font-semibold",children:e.lost}),(0,A.jsx)("td",{className:"px-3 sm:px-4 py-3 text-center",children:(0,A.jsxs)("span",{className:"inline-flex items-center gap-1 text-sm sm:text-base font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent",children:[(0,A.jsx)(g.A,{className:"text-amber-600",size:16}),e.points]})})]},e.teamName))})]})})]})};function z(e,t){let s=0,a=0;return t.forEach(t=>{t.team1Name===e?(s+=t.team1Score,a+=t.team2Score):t.team2Name===e&&(s+=t.team2Score,a+=t.team1Score)}),s-a}const M=e=>{let{db:t,userId:s,userEmail:l,userRole:n,players:y,isActive:k=!1}=e;const[M,C]=(0,a.useState)([]),[D,E]=(0,a.useState)(!0),[I,L]=(0,a.useState)(!1),[T,G]=(0,a.useState)(""),[H,O]=(0,a.useState)(""),[B,F]=(0,a.useState)(""),[R,J]=(0,a.useState)(!1),[W,V]=(0,a.useState)(null),[Y,q]=(0,a.useState)(null),[Q,U]=(0,a.useState)(null),[K,Z]=(0,a.useState)(null),[X,$]=(0,a.useState)([]),[ee,te]=(0,a.useState)([]),[se,ae]=(0,a.useState)(!0),[re,le]=(0,a.useState)(""),[oe,ne]=(0,a.useState)(""),[ie,de]=(0,a.useState)(""),[me,ce]=(0,a.useState)(""),[xe,be]=(0,a.useState)("points"),[ue,he]=(0,a.useState)(!1),pe="admin"===n,ge=pe?y:y.filter(e=>e.userId!==s&&e.registeredBy!==s);(0,a.useEffect)(()=>{if(!t)return;const e="undefined"!==typeof __app_id?__app_id:"default-app-id",s="artifacts/".concat(e,"/public/data/gameSchedule/config"),a=(0,j.H9)(t,s),r=(0,j.aQ)(a,e=>{if(e.exists()){const t=e.data();U(t)}else U(null)},e=>{console.error("Error fetching game schedule:",e)});return()=>r()},[t]),(0,a.useEffect)(()=>{if(!t)return;ae(!0);const e=N.ON.gameResults(),s=(0,j.rJ)(t,e),a=(0,j.aQ)(s,e=>{const t=e.docs.map(e=>(0,i.A)({id:e.id},e.data()));$(t),ae(!1)},e=>{console.error("Error fetching game results:",e),ae(!1)});return()=>a()},[t]),(0,a.useEffect)(()=>{if(X.length>0){const e=function(e){const t=new Map;e.forEach(e=>{t.has(e.team1Name)||t.set(e.team1Name,{teamName:e.team1Name,played:0,won:0,drawn:0,lost:0,points:0}),t.has(e.team2Name)||t.set(e.team2Name,{teamName:e.team2Name,played:0,won:0,drawn:0,lost:0,points:0})}),e.forEach(e=>{const s=t.get(e.team1Name),a=t.get(e.team2Name);s.played++,a.played++,e.team1Score>e.team2Score?(s.won++,s.points+=3,a.lost++):e.team2Score>e.team1Score?(a.won++,a.points+=3,s.lost++):(s.drawn++,s.points+=1,a.drawn++,a.points+=1)});const s=Array.from(t.values());return s.sort((t,s)=>{if(s.points!==t.points)return s.points-t.points;if(s.won!==t.won)return s.won-t.won;const a=z(t.teamName,e),r=z(s.teamName,e);return r!==a?r-a:t.teamName.localeCompare(s.teamName)}),s}(X);te(e)}else te([])},[X]);const fe=(0,a.useCallback)((e,t)=>{const s={};return e.forEach(e=>{const t=e.data();if(t.playerId){const e=(t.pointsHistory||[]).filter(e=>"Played in game"===e.reason&&!0===e.automatic).length;s[t.playerId]={playerId:t.playerId,playerName:t.playerName,totalPoints:t.totalPoints||0,motmAwards:t.motmAwards||0,goals:t.goals||0,assists:t.assists||0,gamesPlayed:e,pointsHistory:t.pointsHistory||[]}}}),t.forEach(e=>{s[e.id]||(s[e.id]={playerId:e.id,playerName:e.name,totalPoints:0,motmAwards:0,goals:0,assists:0,gamesPlayed:0,pointsHistory:[]})}),Object.values(s).sort((e,t)=>t.totalPoints-e.totalPoints)},[]);(0,a.useEffect)(()=>{if(!t||0===y.length)return void E(!1);E(!0);const e="undefined"!==typeof __app_id?__app_id:"default-app-id",s="artifacts/".concat(e,"/public/data/playerPoints"),a=(0,j.rJ)(t,s),r=(0,j.aQ)(a,e=>{const t=fe(e.docs,y);C(t),E(!1)},e=>{console.error("Error fetching points:",e),V("Failed to load leaderboard."),E(!1)});return()=>r()},[t,y,fe]);const ve=(0,a.useMemo)(()=>M.map(e=>{const t=y.find(t=>t.id===e.playerId);return(0,i.A)((0,i.A)({},e),{},{position:(null===t||void 0===t?void 0:t.position)||"CM",skillLevel:(null===t||void 0===t?void 0:t.skillLevel)||5})}),[M,y]),je=(0,v.d)(re,300),we=(0,a.useMemo)(()=>{let e=ve.filter(e=>{if(je.trim()&&!e.playerName.toLowerCase().includes(je.toLowerCase()))return!1;if(oe&&e.position!==oe)return!1;const t=ie?parseInt(ie):0,s=me?parseInt(me):1/0;return!(e.totalPoints<t||e.totalPoints>s)});return e.sort((e,t)=>{switch(xe){case"goals":return(t.goals||0)-(e.goals||0);case"assists":return(t.assists||0)-(e.assists||0);case"games":return(t.gamesPlayed||0)-(e.gamesPlayed||0);default:return t.totalPoints-e.totalPoints}}),e},[ve,je,oe,ie,me,xe]),ye=(0,a.useMemo)(()=>{let e=0;return re.trim()&&e++,oe&&e++,ie&&e++,me&&e++,"points"!==xe&&e++,e},[re,oe,ie,me,xe]),Ne=(0,a.useCallback)(()=>{le(""),ne(""),de(""),ce(""),be("points")},[]);return(0,A.jsxs)("div",{className:"relative overflow-hidden backdrop-blur-xl p-4 sm:p-6 rounded-b-3xl rounded-t-none shadow-[0_20px_60px_rgba(15,23,42,0.15)] -mt-[1px] ".concat(k?"bg-gradient-to-br from-amber-50/95 via-yellow-50/95 to-amber-50/95 border-l-2 border-r-2 border-b-2 border-amber-500/70":"bg-white/90 border border-white/70 border-t-0"),children:[(0,A.jsxs)("div",{className:"pointer-events-none absolute inset-0 opacity-60",children:[(0,A.jsx)("div",{className:"absolute -top-16 -right-10 w-48 h-48 bg-amber-200/50 blur-[90px]"}),(0,A.jsx)("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-yellow-200/50 blur-[80px]"})]}),(0,A.jsxs)("div",{className:"relative z-10",children:[(0,A.jsxs)("div",{className:"mb-8",children:[(0,A.jsxs)("div",{className:"mb-4",children:[(0,A.jsxs)("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold tracking-tight bg-gradient-to-r from-amber-600 via-yellow-600 to-orange-600 bg-clip-text text-transparent pb-2 flex items-center gap-2",children:[(0,A.jsx)(r.A,{className:"text-amber-600",size:24}),"League Table"]}),(0,A.jsx)("p",{className:"text-xs sm:text-sm font-medium text-slate-600 mt-2",children:"Team standings based on game results. Win = 3 pts | Draw = 1 pt | Loss = 0 pts"})]}),(0,A.jsx)(P,{standings:ee,isLoading:se})]}),(0,A.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 mb-6",children:[(0,A.jsxs)("div",{children:[(0,A.jsxs)("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold tracking-tight bg-gradient-to-r from-amber-600 via-yellow-600 to-orange-600 bg-clip-text text-transparent pb-2 flex items-center gap-2",children:[(0,A.jsx)(r.A,{className:"text-amber-600",size:24}),"Leaderboard"]}),(0,A.jsx)("p",{className:"text-xs sm:text-sm font-medium text-slate-600 mt-2",children:pe?"View player rankings and assign points based on performance.":ge.length>0?"View player rankings and assign points for other players.":"View player rankings and performance points."})]}),ge.length>0&&(0,A.jsxs)("button",{onClick:()=>L(!0),className:"bg-gradient-to-r from-amber-500 to-orange-600 text-white font-semibold py-2.5 px-4 sm:px-6 rounded-2xl hover:from-amber-600 hover:to-orange-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center gap-2 w-full sm:w-auto",children:[(0,A.jsx)(d.A,{className:"w-4 h-4"}),(0,A.jsx)("span",{children:"Add Points"})]})]}),W&&(0,A.jsx)("div",{className:"mb-4 p-3 bg-red-50 border-2 border-red-300 text-red-700 rounded-xl text-sm font-semibold",children:W}),Y&&(0,A.jsxs)("div",{className:"mb-4 p-3 bg-emerald-50 border-2 border-emerald-300 text-emerald-700 rounded-xl text-sm font-semibold flex items-center gap-2",children:[(0,A.jsx)(m.A,{className:"w-4 h-4"}),Y]}),(0,A.jsx)("div",{className:"min-h-[400px]",children:D?(0,A.jsx)("div",{className:"text-center p-8 min-h-[400px] flex items-center justify-center",children:(0,A.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,A.jsxs)("div",{className:"relative w-12 h-12",children:[(0,A.jsx)("div",{className:"absolute inset-0 border-4 border-amber-200 rounded-full"}),(0,A.jsx)("div",{className:"absolute inset-0 border-4 border-transparent border-t-amber-600 rounded-full animate-spin"})]}),(0,A.jsx)("p",{className:"text-slate-600 font-medium",children:"Loading leaderboard..."})]})}):0===M.length?(0,A.jsxs)("div",{className:"text-center p-8 bg-gradient-to-br from-slate-100 to-amber-50 rounded-2xl border-2 border-dashed border-amber-200 min-h-[400px] flex flex-col items-center justify-center",children:[(0,A.jsx)(r.A,{className:"mx-auto text-amber-400 mb-3",size:48}),(0,A.jsx)("p",{className:"text-slate-600 font-medium",children:"No points recorded yet."})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"mb-4 space-y-3",children:[(0,A.jsxs)("div",{className:"relative",children:[(0,A.jsx)(c.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),(0,A.jsx)("input",{type:"text",placeholder:"Search players by name...",value:re,onChange:e=>le(e.target.value),className:"w-full pl-10 pr-10 py-2.5 border-2 border-amber-200 rounded-xl focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 transition duration-150 bg-white/80 backdrop-blur-sm shadow-sm hover:shadow-md text-sm font-medium"}),re&&(0,A.jsx)("button",{onClick:()=>le(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 hover:bg-slate-100 rounded-full transition",type:"button",children:(0,A.jsx)(x.A,{className:"text-slate-400 hover:text-slate-600",size:18})})]}),(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("button",{onClick:()=>he(!ue),className:"flex items-center gap-2 px-4 py-2 rounded-xl font-semibold text-sm transition-all duration-200 ".concat(ue?"bg-amber-600 text-white shadow-md":"bg-slate-100 text-slate-700 hover:bg-slate-200"),type:"button",children:[(0,A.jsx)(b.A,{size:16}),"Filters",ye>0&&(0,A.jsx)("span",{className:"bg-white text-amber-600 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",children:ye})]}),ye>0&&(0,A.jsxs)("button",{onClick:Ne,className:"text-xs font-semibold text-slate-600 hover:text-amber-600 transition-colors flex items-center gap-1",type:"button",children:[(0,A.jsx)(x.A,{size:14}),"Clear filters"]})]}),ue&&(0,A.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 p-4 bg-gradient-to-br from-amber-50 to-yellow-50 rounded-xl border-2 border-amber-200 shadow-sm",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-xs font-semibold text-slate-700 mb-1.5 uppercase tracking-wide",children:"Position"}),(0,A.jsxs)("select",{value:oe,onChange:e=>ne(e.target.value),className:"w-full p-2 border-2 border-amber-200 rounded-lg focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 transition duration-150 bg-white text-sm font-medium",children:[(0,A.jsx)("option",{value:"",children:"All Positions"}),S.lP.map(e=>(0,A.jsxs)("option",{value:e,children:[e," - ",S.Ah[e]]},e))]})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-xs font-semibold text-slate-700 mb-1.5 uppercase tracking-wide",children:"Min Points"}),(0,A.jsx)("input",{type:"number",value:ie,onChange:e=>de(e.target.value),placeholder:"Min",min:"0",className:"w-full p-2 border-2 border-amber-200 rounded-lg focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 transition duration-150 bg-white text-sm font-medium"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-xs font-semibold text-slate-700 mb-1.5 uppercase tracking-wide",children:"Max Points"}),(0,A.jsx)("input",{type:"number",value:me,onChange:e=>ce(e.target.value),placeholder:"Max",min:"0",className:"w-full p-2 border-2 border-amber-200 rounded-lg focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 transition duration-150 bg-white text-sm font-medium"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-xs font-semibold text-slate-700 mb-1.5 uppercase tracking-wide",children:"Sort By"}),(0,A.jsxs)("select",{value:xe,onChange:e=>be(e.target.value),className:"w-full p-2 border-2 border-amber-200 rounded-lg focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 transition duration-150 bg-white text-sm font-medium",children:[(0,A.jsx)("option",{value:"points",children:"Points"}),(0,A.jsx)("option",{value:"goals",children:"Goals"}),(0,A.jsx)("option",{value:"assists",children:"Assists"}),(0,A.jsx)("option",{value:"games",children:"Games Played"})]})]})]})]}),ye>0&&we.length>0&&(0,A.jsxs)("div",{className:"text-xs sm:text-sm text-slate-600 font-medium mb-2 px-1",children:["Showing ",we.length," of ",M.length," player",1!==we.length?"s":""]}),0===we.length?(0,A.jsxs)("div",{className:"text-center p-8 bg-gradient-to-br from-slate-100 to-amber-50 rounded-2xl border-2 border-dashed border-amber-200",children:[(0,A.jsx)("p",{className:"text-slate-600 mb-2 font-medium",children:"No players match your filters."}),ye>0&&(0,A.jsx)("button",{onClick:Ne,className:"text-sm text-amber-600 hover:text-amber-700 font-semibold underline",type:"button",children:"Clear filters to see all players"})]}):(0,A.jsx)("div",{className:"space-y-3 max-h-[600px] overflow-y-auto custom-scrollbar",children:we.map((e,t)=>{return(0,A.jsx)("div",{className:"p-4 rounded-2xl border-2 shadow-md ".concat(0===t?"bg-gradient-to-r from-yellow-100 to-amber-100 border-yellow-300":1===t?"bg-gradient-to-r from-gray-100 to-slate-100 border-gray-300":2===t?"bg-gradient-to-r from-orange-100 to-amber-100 border-orange-300":"bg-gradient-to-r from-white to-slate-50 border-slate-200"),children:(0,A.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,A.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(s=t+1,1===s?(0,A.jsx)(r.A,{className:"text-yellow-500",size:24}):2===s?(0,A.jsx)(r.A,{className:"text-gray-400",size:24}):3===s?(0,A.jsx)(r.A,{className:"text-orange-600",size:24}):(0,A.jsx)("span",{className:"text-slate-600 font-bold text-lg w-6 text-center",children:s})),(0,A.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,A.jsx)("p",{className:"font-bold text-slate-800 text-base sm:text-lg truncate cursor-pointer hover:text-indigo-600 transition-colors",onClick:()=>{const t=y.find(t=>t.id===e.playerId);t&&Z({player:t,stats:e})},title:"Click to view player profile",children:e.playerName}),(0,A.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 mt-1.5",children:[(e.motmAwards||0)>0&&(0,A.jsxs)("div",{className:"flex items-center gap-1",children:[(0,A.jsx)(o.A,{className:"text-yellow-500",size:12}),(0,A.jsxs)("span",{className:"text-xs font-semibold text-yellow-600",children:[e.motmAwards," ",(e.motmAwards,"MOTM")]})]}),(0,A.jsxs)("div",{className:"flex items-center gap-1",children:[(0,A.jsx)(u.A,{className:"text-red-500",size:12}),(0,A.jsxs)("span",{className:"text-xs font-semibold text-slate-700",children:[e.goals||0," ",1===e.goals?"Goal":"Goals"]})]}),(0,A.jsxs)("div",{className:"flex items-center gap-1",children:[(0,A.jsx)(h.A,{className:"text-blue-500",size:12}),(0,A.jsxs)("span",{className:"text-xs font-semibold text-slate-700",children:[e.assists||0," ",1===e.assists?"Assist":"Assists"]})]}),(0,A.jsxs)("div",{className:"flex items-center gap-1",children:[(0,A.jsx)(p.A,{className:"text-green-500",size:12}),(0,A.jsxs)("span",{className:"text-xs font-semibold text-slate-700",children:[e.gamesPlayed||0," ",1===e.gamesPlayed?"Game":"Games"]})]})]})]})]}),(0,A.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,A.jsx)(g.A,{className:"text-amber-600",size:20}),(0,A.jsx)("span",{className:"text-2xl font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent",children:e.totalPoints}),(0,A.jsx)("span",{className:"text-sm text-slate-500 font-medium",children:"pts"})]})]})},e.playerId);var s})})]})})]}),I&&(0,A.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center z-[9999] overflow-y-auto animate-in fade-in duration-200",onClick:e=>{e.target===e.currentTarget&&(L(!1),V(null),G(""),O(""),F(""))},children:(0,A.jsxs)("div",{className:"bg-gradient-to-br from-slate-50/98 via-white/98 to-slate-50/98 backdrop-blur-xl w-[calc(100%-2rem)] max-w-full sm:max-w-2xl mx-4 my-4 sm:my-8 max-h-[90vh] sm:max-h-[85vh] rounded-3xl shadow-[0_25px_70px_rgba(15,23,42,0.4)] border-2 border-amber-200/60 p-5 sm:p-6 md:p-8 relative overflow-y-auto animate-in slide-in-from-bottom-4 duration-300",onClick:e=>e.stopPropagation(),children:[(0,A.jsxs)("div",{className:"pointer-events-none absolute inset-0 overflow-hidden rounded-3xl",children:[(0,A.jsx)("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-amber-200/40 rounded-full blur-3xl"}),(0,A.jsx)("div",{className:"absolute -bottom-16 -left-16 w-36 h-36 bg-orange-200/40 rounded-full blur-3xl"})]}),(0,A.jsx)("button",{onClick:()=>{L(!1),V(null),G(""),O(""),F("")},className:"absolute top-4 right-4 sm:top-5 sm:right-5 z-30 w-10 h-10 sm:w-11 sm:h-11 flex items-center justify-center bg-white/95 backdrop-blur-sm border-2 border-slate-200/60 rounded-full shadow-lg hover:shadow-xl hover:bg-white hover:border-slate-300 transition-all duration-200 hover:scale-110 active:scale-95 group",type:"button","aria-label":"Close modal",children:(0,A.jsx)(f.A,{className:"w-5 h-5 text-slate-600 group-hover:text-slate-800 transition-colors"})}),(0,A.jsxs)("div",{className:"relative z-10",children:[(0,A.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,A.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center shadow-lg",children:(0,A.jsx)(d.A,{className:"w-6 h-6 text-white"})}),(0,A.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 bg-clip-text text-transparent",children:"Add Points"})]}),(0,A.jsxs)("div",{className:"space-y-4",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Player"}),(0,A.jsxs)("select",{value:T,onChange:e=>{G(e.target.value),V(null)},className:"w-full p-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 transition duration-150 bg-white/80 backdrop-blur-sm shadow-sm hover:shadow-md",required:!0,disabled:R,children:[(0,A.jsx)("option",{value:"",children:"Select a player"}),ge.map(e=>(0,A.jsx)("option",{value:e.id,children:e.name},e.id))]}),!pe&&0===ge.length&&(0,A.jsx)("p",{className:"mt-2 text-xs text-slate-500 italic",children:"You cannot add points for yourself or players you registered."})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Points"}),(0,A.jsx)("input",{type:"number",value:H,onChange:e=>{O(e.target.value),V(null)},placeholder:"Enter points",min:"1",className:"w-full p-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 transition duration-150 bg-white/80 backdrop-blur-sm shadow-sm hover:shadow-md",required:!0,disabled:R})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason / Performance Note"}),(0,A.jsx)("textarea",{value:B,onChange:e=>{F(e.target.value),V(null)},placeholder:"e.g., Great goal, Excellent defense, Man of the match performance...",rows:4,className:"w-full p-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 transition duration-150 resize-none bg-white/80 backdrop-blur-sm shadow-sm hover:shadow-md",required:!0,disabled:R})]}),W&&(0,A.jsx)("div",{className:"p-3 bg-gradient-to-r from-red-50 to-rose-50 border-2 border-red-300 text-red-700 rounded-xl text-sm font-semibold shadow-md",children:W}),(0,A.jsxs)("button",{onClick:async()=>{if(!T||!H||!B.trim())return void V("Please fill in all fields.");if(!(0,w.Wp)((null===Q||void 0===Q?void 0:Q.schedule)||null))return void V("You can only add performance points after a game day.");const e=parseInt(H);if(isNaN(e)||e<1||e>5)V("Points must be between 1 and 5.");else{V(null),J(!0);try{const s="undefined"!==typeof __app_id?__app_id:"default-app-id",a="artifacts/".concat(s,"/public/data/playerPoints/").concat(T),r=(0,j.H9)(t,a),o=y.find(e=>e.id===T);if(!o)throw new Error("Player not found");const n="artifacts/".concat(s,"/public/data/playerPoints/").concat(T),i=(0,j.H9)(t,n),d=await(0,j.x7)(i);let m=0,c=[];if(d.exists()){const e=d.data();m=e.totalPoints||0,c=e.pointsHistory||[]}const x=m+e,b={points:e,reason:B.trim(),addedBy:l,addedAt:j.Dc.now()};await(0,j.BN)(r,{playerId:T,playerName:o.name,totalPoints:x,pointsHistory:[...c,b]},{merge:!1}),q("Points added successfully!"),G(""),O(""),F(""),L(!1),setTimeout(()=>q(null),3e3)}catch(s){console.error("Error adding points:",s),V("Failed to add points: ".concat(s.message))}finally{J(!1)}}},disabled:R||!T||!H||!B.trim(),className:"w-full flex items-center justify-center gap-2 px-5 py-3 text-base font-bold text-white bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 rounded-2xl transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,A.jsx)(d.A,{size:20})," ",R?"Adding...":"Add Points"]})]})]})]})}),K&&(0,A.jsx)(_,{player:K.player,playerStats:{totalPoints:K.stats.totalPoints,motmAwards:K.stats.motmAwards||0,goals:K.stats.goals||0,assists:K.stats.assists||0,gamesPlayed:K.stats.gamesPlayed||0,pointsHistory:K.stats.pointsHistory},db:t,onClose:()=>Z(null)})]})};var C=s(5746);const D=e=>{let{db:t,userId:s,userEmail:r,userRole:o,players:n,isActive:d=!1}=e;const[m,c]=(0,a.useState)([]),[x,b]=(0,a.useState)(!0),[u,h]=(0,a.useState)(!1),[p,g]=(0,a.useState)(""),[v,w]=(0,a.useState)(""),[y,N]=(0,a.useState)(!1),[k,_]=(0,a.useState)(null),S="admin"===o,P=S?n:n.filter(e=>e.userId!==s&&e.registeredBy!==s);(0,a.useEffect)(()=>{if(!t)return;const e="undefined"!==typeof __app_id?__app_id:"default-app-id",s="artifacts/".concat(e,"/public/data/kudos"),a=(0,j.rJ)(t,s),r=(0,j.P)(a,(0,j.My)("createdAt","desc")),l=(0,j.aQ)(r,e=>{const t=e.docs.map(e=>(0,i.A)({id:e.id},e.data()));c(t),b(!1)},e=>{console.error("Error fetching kudos:",e),_("Failed to load kudos."),b(!1)});return()=>l()},[t]);return(0,A.jsxs)("div",{className:"relative overflow-hidden backdrop-blur-xl p-4 sm:p-6 rounded-b-3xl rounded-t-none shadow-[0_20px_60px_rgba(15,23,42,0.15)] -mt-[1px] ".concat(d?"bg-gradient-to-br from-pink-50/95 via-rose-50/95 to-pink-50/95 border-l-2 border-r-2 border-b-2 border-pink-500/70":"bg-white/90 border border-white/70 border-t-0"),children:[(0,A.jsxs)("div",{className:"pointer-events-none absolute inset-0 opacity-60",children:[(0,A.jsx)("div",{className:"absolute -top-16 -right-10 w-48 h-48 bg-pink-200/50 blur-[90px]"}),(0,A.jsx)("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-rose-200/50 blur-[80px]"})]}),(0,A.jsxs)("div",{className:"relative z-10",children:[(0,A.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 mb-6",children:[(0,A.jsxs)("div",{children:[(0,A.jsxs)("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold tracking-tight bg-gradient-to-r from-pink-600 via-rose-600 to-red-600 bg-clip-text text-transparent pb-2 flex items-center gap-2",children:[(0,A.jsx)(l.A,{className:"text-pink-600",size:24}),"Kudos Board"]}),(0,A.jsx)("p",{className:"text-xs sm:text-sm font-medium text-slate-600 mt-2",children:P.length>0?"Show appreciation and give kudos to your teammates for their great plays and sportsmanship!":"Show appreciation and give kudos to your teammates for their great plays and sportsmanship! (You cannot give kudos to yourself or players you registered.)"})]}),P.length>0&&(0,A.jsxs)("button",{onClick:()=>h(!0),className:"bg-gradient-to-r from-pink-500 to-rose-600 text-white font-semibold py-2.5 px-4 sm:px-6 rounded-2xl hover:from-pink-600 hover:to-rose-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center gap-2 w-full sm:w-auto",children:[(0,A.jsx)(l.A,{className:"w-4 h-4"}),(0,A.jsx)("span",{children:"Give Kudos"})]})]}),k&&(0,A.jsx)("div",{className:"mb-4 p-3 bg-red-50 border-2 border-red-300 text-red-700 rounded-xl text-sm font-semibold",children:k}),x?(0,A.jsx)("div",{className:"text-center p-8",children:(0,A.jsx)("p",{className:"text-slate-600 font-medium",children:"Loading kudos..."})}):0===m.length?(0,A.jsxs)("div",{className:"text-center p-8 bg-gradient-to-br from-slate-100 to-pink-50 rounded-2xl border-2 border-dashed border-pink-200",children:[(0,A.jsx)(l.A,{className:"mx-auto text-pink-400 mb-3",size:48}),(0,A.jsx)("p",{className:"text-slate-600 font-medium",children:"No kudos yet. Be the first to show appreciation!"})]}):(0,A.jsx)("div",{className:"space-y-4 max-h-[600px] overflow-y-auto custom-scrollbar",children:m.map(e=>{return(0,A.jsx)("div",{className:"p-4 sm:p-5 rounded-2xl border-2 shadow-md bg-gradient-to-br from-pink-50 to-rose-50 border-pink-200",children:(0,A.jsxs)("div",{className:"flex items-start gap-3 mb-2",children:[(0,A.jsx)("div",{className:"p-2 bg-gradient-to-br from-pink-500 to-rose-600 rounded-xl shadow-md flex-shrink-0",children:(0,A.jsx)(l.A,{className:"text-white",size:20})}),(0,A.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,A.jsxs)("p",{className:"text-sm font-semibold text-slate-700 mb-1",children:[(0,A.jsx)("span",{className:"text-pink-700",children:e.fromUserEmail})," gave kudos to"," ",(0,A.jsx)("span",{className:"font-bold text-pink-800",children:e.toPlayerName})]}),(0,A.jsx)("p",{className:"text-sm text-slate-800 font-medium whitespace-pre-wrap break-words",children:e.message}),(0,A.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:(t=e.createdAt,null!==t&&void 0!==t&&t.toDate?t.toDate().toLocaleString():null!==t&&void 0!==t&&t.seconds?new Date(1e3*t.seconds).toLocaleString():"N/A")})]})]})},e.id);var t})})]}),u&&(0,A.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center z-[9999] overflow-y-auto animate-in fade-in duration-200",onClick:e=>{e.target===e.currentTarget&&(h(!1),_(null),g(""),w(""))},children:(0,A.jsxs)("div",{className:"bg-gradient-to-br from-slate-50/98 via-white/98 to-slate-50/98 backdrop-blur-xl w-[calc(100%-2rem)] max-w-full sm:max-w-2xl mx-4 my-4 sm:my-8 max-h-[90vh] sm:max-h-[85vh] rounded-3xl shadow-[0_25px_70px_rgba(15,23,42,0.4)] border-2 border-pink-200/60 p-5 sm:p-6 md:p-8 relative overflow-y-auto animate-in slide-in-from-bottom-4 duration-300",onClick:e=>e.stopPropagation(),children:[(0,A.jsxs)("div",{className:"pointer-events-none absolute inset-0 overflow-hidden rounded-3xl",children:[(0,A.jsx)("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-pink-200/40 rounded-full blur-3xl"}),(0,A.jsx)("div",{className:"absolute -bottom-16 -left-16 w-36 h-36 bg-rose-200/40 rounded-full blur-3xl"})]}),(0,A.jsx)("button",{onClick:()=>{h(!1),_(null),g(""),w("")},className:"absolute top-4 right-4 sm:top-5 sm:right-5 z-30 w-10 h-10 sm:w-11 sm:h-11 flex items-center justify-center bg-white/95 backdrop-blur-sm border-2 border-slate-200/60 rounded-full shadow-lg hover:shadow-xl hover:bg-white hover:border-slate-300 transition-all duration-200 hover:scale-110 active:scale-95 group",type:"button","aria-label":"Close modal",children:(0,A.jsx)(f.A,{className:"w-5 h-5 text-slate-600 group-hover:text-slate-800 transition-colors"})}),(0,A.jsxs)("div",{className:"relative z-10",children:[(0,A.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,A.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center shadow-lg",children:(0,A.jsx)(l.A,{className:"w-6 h-6 text-white"})}),(0,A.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 bg-clip-text text-transparent",children:"Give Kudos"})]}),(0,A.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),p&&v.trim()&&t){_(null),N(!0);try{const e="undefined"!==typeof __app_id?__app_id:"default-app-id",a="artifacts/".concat(e,"/public/data/kudos"),l=(0,j.rJ)(t,a),o=n.find(e=>e.id===p);if(!o)throw new Error("Player not found");if(await(0,j.gS)(l,{fromUserId:s,fromUserEmail:r,toPlayerId:p,toPlayerName:o.name,message:v.trim(),createdAt:j.Dc.now()}),o.userId){const e="undefined"!==typeof __app_id?__app_id:"default-app-id",s="artifacts/".concat(e,"/public/data/userNotifications"),a=(0,j.rJ)(t,s);await(0,j.gS)(a,{userId:o.userId,type:"kudos",message:"".concat(r," gave you kudos!"),fromUserEmail:r,relatedPlayerId:p,relatedPlayerName:o.name,createdAt:j.Dc.now(),read:!1})}g(""),w(""),h(!1),_(null)}catch(a){console.error("Error submitting kudos:",a),_("Failed to submit kudos. Please try again.")}finally{N(!1)}}else _("Please select a player and enter a message.")},className:"space-y-4",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Player"}),(0,A.jsxs)("select",{value:p,onChange:e=>{g(e.target.value),_(null)},className:"w-full p-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-pink-500/50 focus:border-pink-500 transition duration-150 bg-white/80 backdrop-blur-sm shadow-sm hover:shadow-md",required:!0,disabled:y,children:[(0,A.jsx)("option",{value:"",children:"Select a player"}),P.map(e=>(0,A.jsx)("option",{value:e.id,children:e.name},e.id))]}),!S&&0===P.length&&(0,A.jsx)("p",{className:"mt-2 text-xs text-slate-500 italic",children:"You cannot give kudos to yourself or players you registered."})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Message"}),(0,A.jsx)("textarea",{value:v,onChange:e=>{w(e.target.value),_(null)},placeholder:"e.g., Great goal today! Amazing teamwork in defense...",rows:4,className:"w-full p-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-pink-500/50 focus:border-pink-500 transition duration-150 resize-none bg-white/80 backdrop-blur-sm shadow-sm hover:shadow-md",required:!0,disabled:y})]}),k&&(0,A.jsx)("div",{className:"p-3 bg-gradient-to-r from-red-50 to-rose-50 border-2 border-red-300 text-red-700 rounded-xl text-sm font-semibold shadow-md",children:k}),(0,A.jsxs)("button",{type:"submit",className:"w-full flex items-center justify-center gap-2 px-5 py-3 text-base font-bold text-white bg-gradient-to-r from-pink-600 to-rose-600 hover:from-pink-700 hover:to-rose-700 rounded-2xl transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed",disabled:y,children:[(0,A.jsx)(C.A,{size:20})," ",y?"Sending...":"Send Kudos"]})]})]})]})})]})};var E=s(2054),I=s(8929);const L=e=>{let{db:t,userId:s,userEmail:l,userRole:n,players:d,isActive:m=!1}=e;const[c,x]=(0,a.useState)([]),[b,u]=(0,a.useState)(!0),[h,p]=(0,a.useState)(!1),[g,v]=(0,a.useState)(""),[N,k]=(0,a.useState)(""),[_,S]=(0,a.useState)(!1),[P,z]=(0,a.useState)(null),[M,C]=(0,a.useState)(null),[D,L]=(0,a.useState)(null),[T,G]=(0,a.useState)(null),[H,O]=(0,a.useState)([]),[B,F]=(0,a.useState)(!1),R="admin"===n,J=R?d:d.filter(e=>e.userId!==s&&e.registeredBy!==s);(0,a.useEffect)(()=>{if(!t)return;const e="undefined"!==typeof __app_id?__app_id:"default-app-id",s="artifacts/".concat(e,"/public/data/gameSchedule/config"),a=(0,j.H9)(t,s),r=(0,j.aQ)(a,e=>{if(e.exists()){const t=e.data();L(t);const s=(0,I.S)(t);G(s)}else L(null),G(null)},e=>{console.error("Error fetching game schedule:",e)}),l="artifacts/".concat(e,"/public/data/manOfTheMatch"),o=(0,j.rJ)(t,l),n=(0,j.P)(o,(0,j.My)("createdAt","desc")),d=(0,j.aQ)(n,e=>{const t=e.docs.map(e=>(0,i.A)({id:e.id},e.data()));x(t),u(!1)},e=>{console.error("Error fetching MOTM nominations:",e),z("Failed to load nominations."),u(!1)});return()=>{r(),d()}},[t]);const W=D?(0,w.X2)(D.schedule):null,V=null!==W;(0,a.useEffect)(()=>{const e=W||(T?T.date.toDateString():null);if(!e||0===c.length)return O([]),void F(!1);const t=c.filter(t=>t.gameDate===e);O(t),F(t.some(e=>e.nominatedBy===s))},[T,c,s,W]);const Y=(()=>{const e={};return H.forEach(t=>{e[t.nominatedPlayerId]||(e[t.nominatedPlayerId]={name:t.nominatedPlayerName,count:0}),e[t.nominatedPlayerId].count++}),Object.values(e).sort((e,t)=>t.count-e.count)})();return(0,A.jsxs)("div",{className:"relative overflow-hidden backdrop-blur-xl p-4 sm:p-6 rounded-b-3xl rounded-t-none shadow-[0_20px_60px_rgba(15,23,42,0.15)] -mt-[1px] ".concat(m?"bg-gradient-to-br from-yellow-50/95 via-amber-50/95 to-yellow-50/95 border-l-2 border-r-2 border-b-2 border-yellow-500/70":"bg-white/90 border border-white/70 border-t-0"),children:[(0,A.jsxs)("div",{className:"pointer-events-none absolute inset-0 opacity-60",children:[(0,A.jsx)("div",{className:"absolute -top-16 -right-10 w-48 h-48 bg-yellow-200/50 blur-[90px]"}),(0,A.jsx)("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-amber-200/50 blur-[80px]"})]}),(0,A.jsxs)("div",{className:"relative z-10",children:[(0,A.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 mb-6",children:[(0,A.jsxs)("div",{children:[(0,A.jsxs)("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold tracking-tight bg-gradient-to-r from-yellow-600 via-amber-600 to-orange-600 bg-clip-text text-transparent pb-2 flex items-center gap-2",children:[(0,A.jsx)(o.A,{className:"text-yellow-600",size:24}),"Man of the Match"]}),(0,A.jsx)("p",{className:"text-xs sm:text-sm font-medium text-slate-600 mt-2",children:V?"Nominate the best performer from today's game.":J.length>0?"Nominate the best performer after a game day.":"Nominate the best performer after a game day. (You cannot nominate yourself or players you registered.)"})]}),V&&!B&&J.length>0&&(0,A.jsxs)("button",{onClick:()=>p(!0),className:"bg-gradient-to-r from-yellow-500 to-amber-600 text-white font-semibold py-2.5 px-4 sm:px-6 rounded-2xl hover:from-yellow-600 hover:to-amber-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center gap-2 w-full sm:w-auto",children:[(0,A.jsx)(o.A,{className:"w-4 h-4"}),(0,A.jsx)("span",{children:"Nominate"})]}),!V&&(0,A.jsx)("div",{className:"text-xs sm:text-sm text-slate-500 italic",children:"Available after game day"})]}),V&&(0,A.jsxs)("div",{className:"mb-6 p-4 bg-gradient-to-r from-yellow-100 to-amber-100 border-2 border-yellow-300 rounded-2xl",children:[(0,A.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,A.jsx)(y.A,{className:"text-yellow-600",size:18}),(0,A.jsx)("p",{className:"text-sm font-semibold text-yellow-800",children:"Today's Game"})]}),B&&(0,A.jsxs)("p",{className:"text-xs text-yellow-700 flex items-center gap-1",children:[(0,A.jsx)(E.A,{className:"w-3 h-3"}),"You have already nominated a player for today's game."]})]}),P&&(0,A.jsx)("div",{className:"mb-4 p-3 bg-red-50 border-2 border-red-300 text-red-700 rounded-xl text-sm font-semibold",children:P}),M&&(0,A.jsxs)("div",{className:"mb-4 p-3 bg-emerald-50 border-2 border-emerald-300 text-emerald-700 rounded-xl text-sm font-semibold flex items-center gap-2",children:[(0,A.jsx)(E.A,{className:"w-4 h-4"}),M]}),!V&&!T&&(0,A.jsxs)("div",{className:"text-center p-8 bg-gradient-to-br from-slate-100 to-yellow-50 rounded-2xl border-2 border-dashed border-yellow-200",children:[(0,A.jsx)(y.A,{className:"mx-auto text-yellow-400 mb-3",size:48}),(0,A.jsx)("p",{className:"text-slate-600 font-medium",children:"No game today. Nomination is available after a game day."})]}),T&&Y.length>0&&(0,A.jsxs)("div",{className:"mb-6",children:[(0,A.jsxs)("h3",{className:"text-lg font-bold text-slate-800 mb-3 flex items-center gap-2",children:[(0,A.jsx)(r.A,{className:"text-yellow-600",size:20}),"Current Week Votes"]}),(0,A.jsx)("div",{className:"space-y-2",children:Y.map((e,t)=>(0,A.jsx)("div",{className:"p-3 rounded-xl border-2 ".concat(0===t?"bg-gradient-to-r from-yellow-100 to-amber-100 border-yellow-300":"bg-white border-slate-200"),children:(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("div",{className:"flex items-center gap-2",children:[0===t&&(0,A.jsx)(o.A,{className:"text-yellow-600",size:18}),(0,A.jsx)("span",{className:"font-semibold text-slate-800",children:e.name})]}),(0,A.jsxs)("span",{className:"text-sm font-bold text-slate-600",children:[e.count," ",1===e.count?"vote":"votes"]})]})},e.name))})]}),b?(0,A.jsx)("div",{className:"text-center p-8",children:(0,A.jsx)("p",{className:"text-slate-600 font-medium",children:"Loading nominations..."})}):0===c.length?(0,A.jsxs)("div",{className:"text-center p-8 bg-gradient-to-br from-slate-100 to-yellow-50 rounded-2xl border-2 border-dashed border-yellow-200",children:[(0,A.jsx)(o.A,{className:"mx-auto text-yellow-400 mb-3",size:48}),(0,A.jsx)("p",{className:"text-slate-600 font-medium",children:"No nominations yet."})]}):(0,A.jsxs)("div",{children:[(0,A.jsx)("h3",{className:"text-lg font-bold text-slate-800 mb-3",children:"Recent Nominations"}),(0,A.jsx)("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:c.slice(0,10).map(e=>{return(0,A.jsx)("div",{className:"p-4 rounded-2xl border-2 shadow-md bg-gradient-to-br from-white to-yellow-50 border-yellow-200",children:(0,A.jsxs)("div",{className:"flex items-start gap-3",children:[(0,A.jsx)("div",{className:"p-2 bg-gradient-to-br from-yellow-500 to-amber-600 rounded-xl shadow-md flex-shrink-0",children:(0,A.jsx)(o.A,{className:"text-white",size:18})}),(0,A.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,A.jsxs)("p",{className:"text-sm font-semibold text-slate-700 mb-1",children:[(0,A.jsx)("span",{className:"font-bold text-yellow-800",children:e.nominatedPlayerName})," nominated by"," ",(0,A.jsx)("span",{className:"text-slate-600",children:e.nominatedByEmail})]}),e.reason&&(0,A.jsx)("p",{className:"text-sm text-slate-700 mb-2 whitespace-pre-wrap break-words",children:e.reason}),(0,A.jsxs)("p",{className:"text-xs text-slate-500",children:["Game: ",e.gameDate," \u2022 ",(t=e.createdAt,null!==t&&void 0!==t&&t.toDate?t.toDate().toLocaleString():null!==t&&void 0!==t&&t.seconds?new Date(1e3*t.seconds).toLocaleString():"N/A")]})]})]})},e.id);var t})})]})]}),h&&T&&(0,A.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center z-[9999] overflow-y-auto animate-in fade-in duration-200",onClick:e=>{e.target===e.currentTarget&&(p(!1),z(null),v(""),k(""))},children:(0,A.jsxs)("div",{className:"bg-gradient-to-br from-slate-50/98 via-white/98 to-slate-50/98 backdrop-blur-xl w-[calc(100%-2rem)] max-w-full sm:max-w-2xl mx-4 my-4 sm:my-8 max-h-[90vh] sm:max-h-[85vh] rounded-3xl shadow-[0_25px_70px_rgba(15,23,42,0.4)] border-2 border-yellow-200/60 p-5 sm:p-6 md:p-8 relative overflow-y-auto animate-in slide-in-from-bottom-4 duration-300",onClick:e=>e.stopPropagation(),children:[(0,A.jsxs)("div",{className:"pointer-events-none absolute inset-0 overflow-hidden rounded-3xl",children:[(0,A.jsx)("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-yellow-200/40 rounded-full blur-3xl"}),(0,A.jsx)("div",{className:"absolute -bottom-16 -left-16 w-36 h-36 bg-amber-200/40 rounded-full blur-3xl"})]}),(0,A.jsx)("button",{onClick:()=>{p(!1),z(null),v(""),k("")},className:"absolute top-4 right-4 sm:top-5 sm:right-5 z-30 w-10 h-10 sm:w-11 sm:h-11 flex items-center justify-center bg-white/95 backdrop-blur-sm border-2 border-slate-200/60 rounded-full shadow-lg hover:shadow-xl hover:bg-white hover:border-slate-300 transition-all duration-200 hover:scale-110 active:scale-95 group",type:"button","aria-label":"Close modal",children:(0,A.jsx)(f.A,{className:"w-5 h-5 text-slate-600 group-hover:text-slate-800 transition-colors"})}),(0,A.jsxs)("div",{className:"relative z-10",children:[(0,A.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,A.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-yellow-500 to-amber-600 flex items-center justify-center shadow-lg",children:(0,A.jsx)(o.A,{className:"w-6 h-6 text-white"})}),(0,A.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 bg-clip-text text-transparent",children:"Nominate Man of the Match"})]}),(0,A.jsxs)("div",{className:"mb-6 p-4 bg-gradient-to-r from-yellow-50 to-amber-50 border-2 border-yellow-200/60 rounded-xl shadow-sm",children:[(0,A.jsx)("p",{className:"text-sm font-semibold text-yellow-800 mb-1",children:"Game:"}),(0,A.jsx)("p",{className:"text-sm text-yellow-700 font-medium",children:T.formatted})]}),(0,A.jsxs)("div",{className:"space-y-4",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Player"}),(0,A.jsxs)("select",{value:g,onChange:e=>{v(e.target.value),z(null)},className:"w-full p-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-yellow-500/50 focus:border-yellow-500 transition duration-150 bg-white/80 backdrop-blur-sm shadow-sm hover:shadow-md",required:!0,disabled:_,children:[(0,A.jsx)("option",{value:"",children:"Select a player"}),J.map(e=>(0,A.jsx)("option",{value:e.id,children:e.name},e.id))]}),!R&&0===J.length&&(0,A.jsx)("p",{className:"mt-2 text-xs text-slate-500 italic",children:"You cannot nominate yourself or players you registered."})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason (Optional)"}),(0,A.jsx)("textarea",{value:N,onChange:e=>{k(e.target.value),z(null)},placeholder:"Why did this player deserve Man of the Match?",rows:4,className:"w-full p-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-yellow-500/50 focus:border-yellow-500 transition duration-150 resize-none bg-white/80 backdrop-blur-sm shadow-sm hover:shadow-md",disabled:_})]}),P&&(0,A.jsx)("div",{className:"p-3 bg-gradient-to-r from-red-50 to-rose-50 border-2 border-red-300 text-red-700 rounded-xl text-sm font-semibold shadow-md",children:P}),(0,A.jsxs)("button",{onClick:async()=>{if(g)if(V)if(B)z("You have already nominated a player for today's game.");else{z(null),S(!0);try{const e="undefined"!==typeof __app_id?__app_id:"default-app-id",a="artifacts/".concat(e,"/public/data/manOfTheMatch"),r=(0,j.rJ)(t,a),o=d.find(e=>e.id===g);if(!o)throw new Error("Player not found");const n=W||(new Date).toDateString();if(await(0,j.gS)(r,{gameDate:n,nominatedPlayerId:g,nominatedPlayerName:o.name,nominatedBy:s,nominatedByEmail:l,reason:N.trim()||void 0,createdAt:j.Dc.now()}),o.userId){const e="undefined"!==typeof __app_id?__app_id:"default-app-id",s="artifacts/".concat(e,"/public/data/userNotifications"),a=(0,j.rJ)(t,s);await(0,j.gS)(a,{userId:o.userId,type:"motm",message:"".concat(l," nominated you for Man of the Match!"),fromUserEmail:l,relatedPlayerId:g,relatedPlayerName:o.name,createdAt:j.Dc.now(),read:!1})}C("Nomination submitted successfully!"),v(""),k(""),p(!1),setTimeout(()=>C(null),3e3)}catch(e){console.error("Error submitting nomination:",e),z("Failed to submit nomination: ".concat(e.message))}finally{S(!1)}}else z("You can only nominate Man of the Match after a game day.");else z("Please select a player.")},disabled:_||!g,className:"w-full flex items-center justify-center gap-2 px-5 py-3 text-base font-bold text-white bg-gradient-to-r from-yellow-600 to-amber-600 hover:from-yellow-700 hover:to-amber-700 rounded-2xl transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,A.jsx)(o.A,{size:20})," ",_?"Submitting...":"Submit Nomination"]})]})]})]})})]})},T=e=>{let{db:t,userId:s,userEmail:i,userRole:d,players:m,isActive:c=!1}=e;const[x,b]=(0,a.useState)("leaderboard"),u=[{id:"leaderboard",label:"Leaderboard",icon:(0,A.jsx)(r.A,{className:"w-5 h-5"}),description:"Player rankings & stats"},{id:"kudos",label:"Kudos Board",icon:(0,A.jsx)(l.A,{className:"w-5 h-5"}),description:"Show appreciation"},{id:"motm",label:"Man of the Match",icon:(0,A.jsx)(o.A,{className:"w-5 h-5"}),description:"Vote for MOTM"}];return(0,A.jsxs)("div",{className:"relative overflow-hidden backdrop-blur-xl rounded-b-3xl rounded-t-none shadow-[0_20px_60px_rgba(15,23,42,0.15)] -mt-[1px] ".concat(c?"bg-gradient-to-br from-amber-50/95 via-yellow-50/95 to-amber-50/95 border-l-2 border-r-2 border-b-2 border-amber-500/70":"bg-white/90 border border-white/70 border-t-0"),children:[(0,A.jsxs)("div",{className:"pointer-events-none absolute inset-0 opacity-60",children:[(0,A.jsx)("div",{className:"absolute -top-16 -right-10 w-48 h-48 bg-amber-200/50 blur-[90px]"}),(0,A.jsx)("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-yellow-200/50 blur-[80px]"})]}),(0,A.jsxs)("div",{className:"relative z-10 p-4 sm:p-6",children:[(0,A.jsx)("div",{className:"mb-6",children:(0,A.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,A.jsx)("div",{className:"p-3 bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl shadow-lg",children:(0,A.jsx)(n.A,{className:"text-white",size:28})}),(0,A.jsxs)("div",{children:[(0,A.jsx)("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold tracking-tight bg-gradient-to-r from-amber-600 via-yellow-600 to-orange-600 bg-clip-text text-transparent",children:"Statistics"}),(0,A.jsx)("p",{className:"text-xs sm:text-sm font-medium text-slate-600 mt-1",children:"View rankings and celebrate achievements"})]})]})}),(0,A.jsx)("div",{className:"mb-6",children:(0,A.jsxs)("div",{className:"flex flex-wrap gap-2 sm:gap-2 p-2.5 sm:p-3 bg-gradient-to-b from-white/90 via-white/85 to-white/90 backdrop-blur-xl rounded-2xl shadow-[0_8px_24px_rgba(15,23,42,0.1),0_0_0_1px_rgba(255,255,255,0.5)_inset] border-2 border-amber-200/40 relative",children:[(0,A.jsx)("div",{className:"absolute top-0 left-0 right-0 h-[2px] bg-gradient-to-r from-amber-400/40 via-orange-400/50 to-amber-400/40 rounded-t-2xl"}),u.map(e=>(0,A.jsxs)("button",{onClick:()=>b(e.id),className:"group relative flex-1 min-w-[140px] sm:flex-initial flex flex-col sm:flex-row items-center justify-center gap-2 px-5 py-3 rounded-xl font-semibold text-sm transition-all duration-300 overflow-hidden ".concat(x===e.id?"bg-gradient-to-br from-amber-500 via-orange-500 to-amber-600 text-white shadow-[0_6px_20px_rgba(245,158,11,0.35),0_0_0_1px_rgba(255,255,255,0.1)_inset] ring-2 ring-amber-400/50":"bg-white/60 text-slate-700 hover:bg-gradient-to-br hover:from-amber-50/80 hover:via-orange-50/80 hover:to-amber-50/80 hover:text-amber-800 hover:shadow-lg hover:ring-1 hover:ring-amber-200/50 border border-transparent hover:border-amber-100/50"),children:[x===e.id&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 via-white/10 to-transparent"}),(0,A.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-white/30 to-transparent"})]}),(0,A.jsx)("span",{className:"relative transition-all duration-300 ".concat(x===e.id?"text-white scale-110 drop-shadow-sm":"text-amber-600 group-hover:scale-110"),children:e.icon}),(0,A.jsxs)("div",{className:"flex flex-col items-center sm:items-start relative",children:[(0,A.jsx)("span",{className:"font-semibold",children:e.label}),(0,A.jsx)("span",{className:"text-xs ".concat(x===e.id?"text-amber-100/90":"text-slate-500"," hidden sm:block"),children:e.description})]})]},e.id))]})}),(0,A.jsx)("div",{className:"h-[1px] bg-gradient-to-r from-transparent via-amber-300/30 to-transparent mb-4"}),(0,A.jsxs)("div",{className:"min-h-[600px] relative",children:["leaderboard"===x&&(0,A.jsx)("div",{className:"animate-in fade-in duration-300",children:(0,A.jsx)(M,{db:t,userId:s,userEmail:i,userRole:d,players:m,isActive:c})}),"kudos"===x&&(0,A.jsx)("div",{className:"animate-in fade-in duration-300",children:(0,A.jsx)(D,{db:t,userId:s,userEmail:i,userRole:d,players:m,isActive:c})}),"motm"===x&&(0,A.jsx)("div",{className:"animate-in fade-in duration-300",children:(0,A.jsx)(L,{db:t,userId:s,userEmail:i,userRole:d,players:m,isActive:c})})]})]})]})}}}]);
//# sourceMappingURL=461.ec2fc42c.chunk.js.map