/*! For license information please see 26.89a82092.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkequate=self.webpackChunkequate||[]).push([[26],{26:(e,t,s)=>{s.r(t),s.d(t,{default:()=>J});var a=s(5043),r=s(8646),l=s(3165),o=s(7033),d=s(1130),i=s(7118),n=s(9233),c=s(7784);const m=(0,c.A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),x=(0,c.A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var u=s(2054),p=s(7819),b=s(2555),h=s(8006),g=s(8693),f=s(6667),v=s(579);const j=e=>{let{value:t,onChange:s,className:r=""}=e;const[l,o]=(0,a.useState)("6"),[d,i]=(0,a.useState)("00"),[n,c]=(0,a.useState)(!1),m=(0,a.useRef)(!1);(0,a.useEffect)(()=>{if(m.current)m.current=!1;else if(t&&t.includes(":")){const[e,s]=t.split(":").map(Number);isNaN(e)||isNaN(s)||(0===e?(o("12"),c(!1)):e<12?(o(e.toString()),c(!1)):12===e?(o("12"),c(!0)):(o((e-12).toString()),c(!0)),i(s.toString().padStart(2,"0")))}},[t]);const x=(e,t,a)=>{if(!e||!t||""===e||""===t)return;const r=parseInt(e),l=parseInt(t);if(isNaN(r)||isNaN(l)||r<1||r>12||l<0||l>59)return;m.current=!0;let o=r;o=12===r?a?12:0:a?r+12:r;const d=o.toString().padStart(2,"0"),i=l.toString().padStart(2,"0");s("".concat(d,":").concat(i))},u=(e,t)=>{"Enter"===e.key&&e.currentTarget.blur(),/[0-9]/.test(e.key)||["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(e.key)||e.preventDefault()};return(0,v.jsx)("div",{className:"flex items-center gap-2 ".concat(r),children:(0,v.jsxs)("div",{className:"flex items-center gap-1.5 bg-white/90 backdrop-blur-sm border-2 border-slate-300/80 rounded-lg px-3 py-2 shadow-sm hover:shadow-md hover:border-emerald-300 transition-all duration-200",children:[(0,v.jsx)("input",{type:"text",value:l,onChange:e=>{const t=e.target.value.replace(/\D/g,"");o(t)},onBlur:()=>{let e=l.trim();if(e&&""!==e){const t=parseInt(e);isNaN(t)||t<1?(e="1",o("1")):t>12?(e="12",o("12")):(e=t.toString(),o(e))}else e="6",o("6");x(e,d||"00",n)},onKeyDown:e=>u(e),className:"w-8 text-center text-sm font-bold focus:outline-none focus:ring-2 focus:ring-emerald-500/50 rounded bg-transparent",maxLength:2,placeholder:"6"}),(0,v.jsx)("span",{className:"text-slate-400 font-bold",children:":"}),(0,v.jsx)("input",{type:"text",value:d,onChange:e=>{const t=e.target.value.replace(/\D/g,"");i(t)},onBlur:()=>{let e=d.trim();if(e&&""!==e){const t=parseInt(e);isNaN(t)||t<0?(e="00",i("00")):t>59?(e="59",i("59")):(e=t.toString().padStart(2,"0"),i(e))}else e="00",i("00");x(l||"6",e,n)},onKeyDown:e=>u(e),className:"w-10 text-center text-sm font-bold focus:outline-none focus:ring-2 focus:ring-emerald-500/50 rounded bg-transparent",maxLength:2,placeholder:"00"}),(0,v.jsx)("button",{type:"button",onClick:()=>{const e=!n;c(e),x(l||"6",d||"00",e)},className:"ml-1.5 px-2.5 py-1 rounded-md font-bold text-xs transition-all duration-200 ".concat(n?"bg-gradient-to-r from-emerald-500 to-teal-600 text-white shadow-md":"bg-slate-200 text-slate-700 hover:bg-slate-300"),children:n?"PM":"AM"})]})})},N=[{value:0,label:"Sunday",short:"Sun"},{value:1,label:"Monday",short:"Mon"},{value:2,label:"Tuesday",short:"Tue"},{value:3,label:"Wednesday",short:"Wed"},{value:4,label:"Thursday",short:"Thu"},{value:5,label:"Friday",short:"Fri"},{value:6,label:"Saturday",short:"Sat"}],w=e=>{let{db:t,userId:s,userEmail:l,isActive:o=!1}=e;const[d,i]=(0,a.useState)({6:"18:00"}),[n,c]=(0,a.useState)({}),[m,x]=(0,a.useState)(!0),[p,w]=(0,a.useState)(!1),[y,k]=(0,a.useState)(null),[A,_]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!t)return;(async()=>{try{const e="undefined"!==typeof __app_id?__app_id:"default-app-id",s="artifacts/".concat(e,"/public/data/gameSchedule/config"),a=(0,f.H9)(t,s),r=await(0,f.x7)(a);if(r.exists()){const e=r.data();i(e.schedule||{6:"18:00"}),c(e.location||{})}}catch(e){console.error("Error fetching game schedule:",e),k("Failed to load game schedule.")}finally{x(!1)}})()},[t]);return m?(0,v.jsx)("div",{className:"relative overflow-hidden p-6 sm:p-8",children:(0,v.jsx)("div",{className:"text-center py-12",children:(0,v.jsxs)("div",{className:"inline-flex flex-col items-center gap-4",children:[(0,v.jsxs)("div",{className:"relative w-12 h-12",children:[(0,v.jsx)("div",{className:"absolute inset-0 border-4 border-emerald-200 rounded-full"}),(0,v.jsx)("div",{className:"absolute inset-0 border-4 border-transparent border-t-emerald-600 rounded-full animate-spin"})]}),(0,v.jsx)("p",{className:"text-slate-600 font-semibold text-sm",children:"Loading game schedule..."})]})})}):(0,v.jsx)("div",{className:"relative overflow-hidden",children:(0,v.jsxs)("div",{className:"relative z-10",children:[(0,v.jsx)("div",{className:"mb-6",children:(0,v.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,v.jsx)("div",{className:"p-3 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl shadow-lg",children:(0,v.jsx)(r.A,{className:"text-white",size:24})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h2",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-emerald-600 via-teal-600 to-cyan-600 bg-clip-text text-transparent",children:"Game Schedule"}),(0,v.jsx)("p",{className:"text-xs sm:text-sm text-slate-600 font-medium mt-0.5",children:"Configure game times and field locations"})]})]})}),(0,v.jsxs)("div",{className:"mb-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{className:"p-4 bg-gradient-to-br from-emerald-500/10 via-teal-500/10 to-emerald-500/10 backdrop-blur-sm border-2 border-emerald-300/60 rounded-xl shadow-sm",children:[(0,v.jsx)("p",{className:"text-xs font-semibold text-emerald-700 uppercase tracking-wide mb-2",children:"Scheduled Days"}),(0,v.jsx)("p",{className:"text-3xl font-black text-emerald-600 mb-1",children:Object.keys(d).length}),(0,v.jsxs)("p",{className:"text-xs text-emerald-600/80 font-medium",children:[1===Object.keys(d).length?"day":"days"," selected"]})]}),(0,v.jsxs)("div",{className:"p-4 bg-gradient-to-r from-emerald-50/80 via-teal-50/80 to-emerald-50/80 backdrop-blur-sm border-2 border-emerald-200/60 rounded-xl shadow-sm",children:[(0,v.jsx)("p",{className:"text-xs sm:text-sm text-emerald-800 font-semibold mb-2",children:"\ud83d\udca1 Quick Guide"}),(0,v.jsxs)("ul",{className:"text-xs text-emerald-700 space-y-1",children:[(0,v.jsxs)("li",{className:"flex items-start gap-1.5",children:[(0,v.jsx)("span",{className:"text-emerald-500 mt-0.5",children:"\u2022"}),(0,v.jsx)("span",{children:"Toggle switches to schedule games"})]}),(0,v.jsxs)("li",{className:"flex items-start gap-1.5",children:[(0,v.jsx)("span",{className:"text-emerald-500 mt-0.5",children:"\u2022"}),(0,v.jsx)("span",{children:"Set time and location for each day"})]})]})]})]}),(0,v.jsxs)("div",{className:"space-y-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)("label",{className:"block text-sm font-bold text-slate-700 mb-4 flex items-center gap-2",children:[(0,v.jsx)(r.A,{className:"text-emerald-600",size:18}),(0,v.jsx)("span",{children:"Schedule Game Days"})]}),(0,v.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:N.map(e=>{const t=void 0!==d[e.value];return(0,v.jsxs)("div",{className:"group relative overflow-hidden rounded-xl border-2 transition-all duration-300 ".concat(t?"bg-gradient-to-br from-emerald-50 to-teal-50 border-emerald-400 shadow-lg shadow-emerald-500/20":"bg-white/80 border-slate-200 hover:border-emerald-200 hover:shadow-md"),children:[t&&(0,v.jsx)("div",{className:"absolute top-0 right-0 w-20 h-20 bg-emerald-500/10 rounded-full blur-2xl -mr-10 -mt-10"}),(0,v.jsxs)("div",{className:"relative p-4",children:[(0,v.jsxs)("button",{type:"button",onClick:()=>{return t=e.value,i(e=>{if(e[t]){const s=(0,b.A)({},e);return delete s[t],c(e=>{const s=(0,b.A)({},e);return delete s[t],s}),s}return(0,b.A)((0,b.A)({},e),{},{[t]:"18:00"})}),void k(null);var t},className:"w-full flex items-center justify-between mb-3 transition-all duration-300 ".concat(t?"mb-4":""),children:[(0,v.jsx)("span",{className:"font-bold text-base transition-colors ".concat(t?"text-emerald-700":"text-slate-700 group-hover:text-emerald-600"),children:e.label}),(0,v.jsx)("div",{className:"w-10 h-6 rounded-full p-0.5 transition-all duration-300 ".concat(t?"bg-gradient-to-r from-emerald-500 to-teal-600":"bg-slate-300"),children:(0,v.jsx)("div",{className:"w-5 h-5 rounded-full bg-white shadow-md transform transition-transform duration-300 ".concat(t?"translate-x-4":"translate-x-0")})})]}),t&&(0,v.jsxs)("div",{className:"space-y-3 animate-in fade-in slide-in-from-top-2 duration-300",children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)("label",{className:"block text-xs font-semibold text-slate-600 mb-2 flex items-center gap-1.5",children:[(0,v.jsx)(r.A,{className:"text-emerald-600",size:14}),(0,v.jsx)("span",{children:"Game Time"})]}),(0,v.jsx)(j,{value:d[e.value],onChange:t=>((e,t)=>{i(s=>s[e]?(0,b.A)((0,b.A)({},s),{},{[e]:t}):s),k(null)})(e.value,t),className:"w-full"})]}),(0,v.jsxs)("div",{children:[(0,v.jsxs)("label",{className:"block text-xs font-semibold text-slate-600 mb-2 flex items-center gap-1.5",children:[(0,v.jsx)(h.A,{className:"text-emerald-600",size:14}),(0,v.jsx)("span",{children:"Field Location"}),(0,v.jsx)("span",{className:"text-xs font-normal text-slate-400",children:"(Optional)"})]}),(0,v.jsx)("input",{type:"text",value:n[e.value]||"",onChange:t=>{return s=e.value,a=t.target.value,c(e=>{if(a.trim())return(0,b.A)((0,b.A)({},e),{},{[s]:a});{const t=(0,b.A)({},e);return delete t[s],t}}),void k(null);var s,a},placeholder:"e.g., Central Park Field 3",className:"w-full p-2.5 border-2 border-slate-300/80 rounded-lg focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500 transition duration-200 bg-white/90 backdrop-blur-sm shadow-sm hover:shadow-md text-sm"})]})]})]})]},e.value)})}),0===Object.keys(d).length&&(0,v.jsx)("div",{className:"mt-4 p-3 bg-amber-50 border-2 border-amber-200 rounded-lg",children:(0,v.jsxs)("p",{className:"text-xs text-amber-700 font-semibold flex items-center gap-2",children:[(0,v.jsx)("span",{children:"\u26a0\ufe0f"}),(0,v.jsx)("span",{children:"Please select at least one day to schedule games."})]})})]}),y&&(0,v.jsxs)("div",{className:"p-4 bg-gradient-to-r from-red-50 via-rose-50 to-red-50 border-2 border-red-300/80 text-red-800 rounded-xl text-sm font-semibold shadow-lg flex items-start gap-3 animate-in fade-in duration-200",children:[(0,v.jsx)("div",{className:"w-5 h-5 rounded-full bg-red-500 flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,v.jsx)("span",{className:"text-white text-xs",children:"!"})}),(0,v.jsx)("span",{children:y})]}),A&&(0,v.jsxs)("div",{className:"p-4 bg-gradient-to-r from-emerald-50 via-teal-50 to-emerald-50 border-2 border-emerald-300/80 text-emerald-800 rounded-xl text-sm font-semibold shadow-lg flex items-start gap-3 animate-in fade-in duration-200",children:[(0,v.jsx)(u.A,{className:"w-5 h-5 text-emerald-600 flex-shrink-0 mt-0.5"}),(0,v.jsx)("span",{children:A})]}),(0,v.jsx)("div",{className:"pt-4 border-t-2 border-slate-200/60",children:(0,v.jsxs)("button",{onClick:async()=>{if(!t||0===Object.keys(d).length)return void k("Please select at least one day of the week.");if(Object.values(d).some(e=>!e||""===e.trim()))k("Please set a game time for all selected days.");else{w(!0),k(null),_(null);try{const e="undefined"!==typeof __app_id?__app_id:"default-app-id",s="artifacts/".concat(e,"/public/data/gameSchedule/config"),a=(0,f.H9)(t,s),r={};Object.keys(n).forEach(e=>{const t=parseInt(e),s=n[t].trim();s&&(r[t]=s)}),await(0,f.BN)(a,{schedule:d,location:Object.keys(r).length>0?r:null,updatedAt:f.Dc.now(),updatedBy:l}),_("Game schedule saved successfully!"),setTimeout(()=>{_(null)},3e3)}catch(e){console.error("Error saving game schedule:",e),k("Failed to save schedule: ".concat(e.message))}finally{w(!1)}}},disabled:p||0===Object.keys(d).length,className:"w-full sm:w-auto sm:min-w-[200px] px-6 py-3.5 bg-gradient-to-r from-emerald-500 via-teal-600 to-emerald-600 text-white font-bold rounded-xl hover:from-emerald-600 hover:via-teal-700 hover:to-emerald-700 transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-emerald-500/30 transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:hover:shadow-lg flex items-center justify-center gap-2",children:[(0,v.jsx)(g.A,{className:"w-5 h-5 ".concat(p?"animate-spin":"")}),(0,v.jsx)("span",{children:p?"Saving...":"Save Schedule"})]})})]})]})})},y=(0,c.A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var k=s(6108),A=s(5088),_=s(614);const S=e=>{let{db:t,currentUserId:s,currentUserEmail:r,isActive:o=!1}=e;const[d,i]=(0,a.useState)([]),[n,c]=(0,a.useState)(!0),[m,x]=(0,a.useState)(null),[p,h]=(0,a.useState)(null),[g,j]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!t)return;const e="undefined"!==typeof __app_id?__app_id:"default-app-id",s="artifacts/".concat(e,"/public/data/goalsAssistsSubmissions"),a=(0,f.rJ)(t,s),r=(0,f.P)(a,(0,f._M)("status","==","pending")),l=(0,f.aQ)(r,e=>{const t=e.docs.map(e=>(0,b.A)({id:e.id},e.data()));t.sort((e,t)=>{var s,a,r,l,o,d;const i=(null===(s=e.createdAt)||void 0===s||null===(a=s.toMillis)||void 0===a?void 0:a.call(s))||(null===(r=e.createdAt)||void 0===r?void 0:r.seconds)||0;return((null===(l=t.createdAt)||void 0===l||null===(o=l.toMillis)||void 0===o?void 0:o.call(l))||(null===(d=t.createdAt)||void 0===d?void 0:d.seconds)||0)-i}),i(t),c(!1)},e=>{console.error("Error fetching submissions:",e),h("Failed to load submissions."),c(!1)});return()=>{l()}},[t]);return(0,v.jsxs)("div",{className:"relative overflow-hidden backdrop-blur-xl p-4 sm:p-6 rounded-b-3xl rounded-t-none shadow-[0_20px_60px_rgba(15,23,42,0.15)] -mt-[1px] ".concat(o?"bg-gradient-to-br from-purple-50/95 via-indigo-50/95 to-blue-50/95 border-l-2 border-r-2 border-b-2 border-purple-500/70":"bg-white/90 border border-white/70 border-t-0"),children:[(0,v.jsxs)("div",{className:"pointer-events-none absolute inset-0 opacity-60",children:[(0,v.jsx)("div",{className:"absolute -top-16 -right-10 w-48 h-48 bg-purple-200/50 blur-[90px]"}),(0,v.jsx)("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-indigo-200/50 blur-[80px]"})]}),(0,v.jsxs)("div",{className:"relative z-10",children:[(0,v.jsx)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4 mb-6",children:(0,v.jsxs)("div",{children:[(0,v.jsxs)("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold tracking-tight bg-gradient-to-r from-purple-600 via-indigo-600 to-blue-600 bg-clip-text text-transparent pb-2 flex items-center gap-2",children:[(0,v.jsx)(l.A,{className:"text-purple-600",size:24}),"Review Goals & Assists"]}),(0,v.jsx)("p",{className:"text-xs sm:text-sm font-medium text-slate-600 mt-2",children:"Review and approve or reject player goal and assist submissions."})]})}),p&&(0,v.jsx)("div",{className:"mb-4 p-3 bg-red-50 border-2 border-red-300 text-red-700 rounded-xl text-sm font-semibold",children:p}),g&&(0,v.jsxs)("div",{className:"mb-4 p-3 bg-emerald-50 border-2 border-emerald-300 text-emerald-700 rounded-xl text-sm font-semibold flex items-center gap-2",children:[(0,v.jsx)(u.A,{className:"w-4 h-4"}),g]}),n?(0,v.jsx)("div",{className:"text-center p-8",children:(0,v.jsx)("p",{className:"text-slate-600 font-medium",children:"Loading submissions..."})}):0===d.length?(0,v.jsxs)("div",{className:"text-center p-8 bg-gradient-to-br from-slate-100 to-purple-50 rounded-2xl border-2 border-dashed border-purple-200",children:[(0,v.jsx)(u.A,{className:"mx-auto text-purple-400 mb-3",size:48}),(0,v.jsx)("p",{className:"text-slate-600 font-medium",children:"No pending submissions."})]}):(0,v.jsx)("div",{className:"space-y-3 max-h-[600px] overflow-y-auto custom-scrollbar",children:d.map(e=>(0,v.jsx)("div",{className:"p-4 rounded-2xl border-2 border-purple-200 bg-gradient-to-r from-white to-purple-50 shadow-md",children:(0,v.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,v.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,v.jsx)(y,{className:"text-purple-600",size:18}),(0,v.jsx)("p",{className:"font-bold text-slate-800 text-base sm:text-lg",children:e.playerName})]}),(0,v.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mb-2",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)(l.A,{className:"text-red-500",size:16}),(0,v.jsxs)("span",{className:"text-sm font-semibold text-slate-700",children:[e.goals," ",1===e.goals?"Goal":"Goals"]})]}),(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)(k.A,{className:"text-blue-500",size:16}),(0,v.jsxs)("span",{className:"text-sm font-semibold text-slate-700",children:[e.assists," ",1===e.assists?"Assist":"Assists"]})]})]}),(0,v.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-xs text-slate-500",children:[(0,v.jsxs)("div",{className:"flex items-center gap-1",children:[(0,v.jsx)(A.A,{size:12}),(0,v.jsxs)("span",{children:["Game: ",e.gameDate]})]}),(0,v.jsxs)("div",{className:"flex items-center gap-1",children:[(0,v.jsx)(y,{size:12}),(0,v.jsxs)("span",{children:["Submitted by: ",e.submittedByEmail]})]})]})]}),(0,v.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,v.jsxs)("button",{onClick:()=>(async e=>{if(!m){x(e.id),h(null);try{const a="undefined"!==typeof __app_id?__app_id:"default-app-id",l=(0,f.H9)(t,"artifacts/".concat(a,"/public/data/goalsAssistsSubmissions/").concat(e.id));await(0,f.mZ)(l,{status:"approved",reviewedBy:s,reviewedByEmail:r,reviewedAt:f.Dc.now()});const o="artifacts/".concat(a,"/public/data/playerPoints/").concat(e.playerId),d=(0,f.H9)(t,o),i=await(0,f.x7)(d);let n=0,c=0,m=0,x=[];if(i.exists()){const e=i.data();n=e.goals||0,c=e.assists||0,m=e.totalPoints||0,x=e.pointsHistory||[]}const u=n+e.goals,p=c+e.assists;await(0,f.BN)(d,{playerId:e.playerId,playerName:e.playerName,goals:u,assists:p,totalPoints:m,pointsHistory:x,motmAwards:i.exists()&&i.data().motmAwards||0},{merge:!0}),j("Approved stats for ".concat(e.playerName,": ").concat(e.goals," goals, ").concat(e.assists," assists")),setTimeout(()=>j(null),5e3)}catch(a){console.error("Error approving submission:",a),h("Failed to approve submission: ".concat(a.message))}finally{x(null)}}})(e),disabled:m===e.id,className:"px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all duration-300 shadow-md hover:shadow-lg transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,v.jsx)(u.A,{size:16}),(0,v.jsx)("span",{children:"Approve"})]}),(0,v.jsxs)("button",{onClick:()=>(async e=>{if(!m){x(e.id),h(null);try{const a="undefined"!==typeof __app_id?__app_id:"default-app-id",l=(0,f.H9)(t,"artifacts/".concat(a,"/public/data/goalsAssistsSubmissions/").concat(e.id));await(0,f.mZ)(l,{status:"rejected",reviewedBy:s,reviewedByEmail:r,reviewedAt:f.Dc.now()}),j("Rejected submission for ".concat(e.playerName)),setTimeout(()=>j(null),5e3)}catch(a){console.error("Error rejecting submission:",a),h("Failed to reject submission: ".concat(a.message))}finally{x(null)}}})(e),disabled:m===e.id,className:"px-4 py-2 bg-gradient-to-r from-red-500 to-rose-600 text-white font-semibold rounded-xl hover:from-red-600 hover:to-rose-700 transition-all duration-300 shadow-md hover:shadow-lg transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,v.jsx)(_.A,{size:16}),(0,v.jsx)("span",{children:"Reject"})]})]})]})},e.id))})]})]})};var C=s(1360),z=s(7719),E=s(9855);const M=e=>{let{db:t,userId:s,userEmail:r,userRole:l,isActive:o=!1}=e;const[d,i]=(0,a.useState)([]),[c,m]=(0,a.useState)(!1),[x,u]=(0,a.useState)(""),[p,h]=(0,a.useState)(""),[g,j]=(0,a.useState)(!1),[N,w]=(0,a.useState)(!1),[y,k]=(0,a.useState)(null),[A,S]=(0,a.useState)(!0);(0,a.useEffect)(()=>{if(!t)return;const e="undefined"!==typeof __app_id?__app_id:"default-app-id",s="artifacts/".concat(e,"/public/data/notifications"),a=(0,f.rJ)(t,s),r=(0,f.P)(a,(0,f.My)("createdAt","desc")),l=(0,f.aQ)(r,e=>{const t=e.docs.map(e=>(0,b.A)({id:e.id},e.data()));i(t),S(!1)},e=>{console.error("Error fetching notifications:",e),k("Failed to load notifications."),S(!1)});return()=>l()},[t]);const M="admin"===l;return(0,v.jsxs)("div",{className:"relative overflow-hidden backdrop-blur-xl p-4 sm:p-6 rounded-b-3xl rounded-t-none shadow-[0_20px_60px_rgba(15,23,42,0.15)] -mt-[1px] ".concat(o?"bg-gradient-to-br from-orange-50/95 via-red-50/95 to-orange-50/95 border-l-2 border-r-2 border-b-2 border-orange-500/70":"bg-white/90 border border-white/70 border-t-0"),children:[(0,v.jsxs)("div",{className:"pointer-events-none absolute inset-0 opacity-60",children:[(0,v.jsx)("div",{className:"absolute -top-16 -right-10 w-48 h-48 bg-orange-200/50 blur-[90px]"}),(0,v.jsx)("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-red-200/50 blur-[80px]"})]}),(0,v.jsxs)("div",{className:"relative z-10",children:[(0,v.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 mb-6",children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold bg-gradient-to-r from-orange-600 via-red-600 to-rose-600 bg-clip-text text-transparent pb-2 flex items-center gap-2",children:[(0,v.jsx)(n.A,{className:"text-orange-600",size:24}),"Notifications"]}),(0,v.jsx)("p",{className:"text-xs sm:text-sm font-medium text-slate-600 mt-2",children:M?"Create and manage critical notifications for all users.":"View important announcements from admins."})]}),M&&(0,v.jsxs)("button",{onClick:()=>m(!0),className:"bg-gradient-to-r from-orange-500 to-red-600 text-white font-semibold py-2.5 px-4 sm:px-6 rounded-2xl hover:from-orange-600 hover:to-red-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center gap-2 w-full sm:w-auto",children:[(0,v.jsx)(C.A,{className:"w-4 h-4"}),(0,v.jsx)("span",{children:"New Notification"})]})]}),y&&(0,v.jsx)("div",{className:"mb-4 p-3 bg-red-50 border-2 border-red-300 text-red-700 rounded-xl text-sm font-semibold",children:y}),A?(0,v.jsx)("div",{className:"text-center p-8",children:(0,v.jsx)("p",{className:"text-slate-600 font-medium",children:"Loading notifications..."})}):0===d.length?(0,v.jsxs)("div",{className:"text-center p-8 bg-gradient-to-br from-slate-100 to-orange-50 rounded-2xl border-2 border-dashed border-orange-200",children:[(0,v.jsx)(n.A,{className:"mx-auto text-orange-400 mb-3",size:48}),(0,v.jsx)("p",{className:"text-slate-600 font-medium",children:"No notifications yet."})]}):(0,v.jsx)("div",{className:"space-y-4 max-h-[600px] overflow-y-auto custom-scrollbar",children:d.map(e=>{var s;return(0,v.jsx)("div",{className:"p-4 sm:p-5 rounded-2xl border-2 shadow-md ".concat(e.isCritical?"bg-gradient-to-br from-red-50 to-orange-50 border-red-400":"bg-gradient-to-br from-orange-50 to-amber-50 border-orange-300"),children:(0,v.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,v.jsxs)("div",{className:"flex-1",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[e.isCritical&&(0,v.jsx)(z.A,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),(0,v.jsx)("h3",{className:"text-base sm:text-lg font-bold text-slate-800",children:e.title}),e.isCritical&&(0,v.jsx)("span",{className:"px-2 py-0.5 bg-red-600 text-white text-xs font-bold rounded-full",children:"Critical"})]}),(0,v.jsx)("p",{className:"text-sm sm:text-base text-slate-700 whitespace-pre-wrap mb-2",children:e.message}),(0,v.jsx)("p",{className:"text-xs text-slate-500",children:null===(s=e.createdAt)||void 0===s?void 0:s.toDate().toLocaleString()})]}),M&&(0,v.jsx)("button",{onClick:()=>(async e=>{if(t)try{const s="undefined"!==typeof __app_id?__app_id:"default-app-id",a="artifacts/".concat(s,"/public/data/notifications/").concat(e),r=(0,f.H9)(t,a);await(0,f.kd)(r)}catch(s){console.error("Error deleting notification:",s),k("Failed to delete notification.")}})(e.id),className:"p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-110 flex-shrink-0",title:"Delete notification",children:(0,v.jsx)(E.A,{size:16})})]})},e.id)})}),c&&(0,v.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center z-[9999] overflow-y-auto animate-in fade-in duration-200",children:(0,v.jsxs)("div",{className:"bg-gradient-to-br from-slate-50/98 via-white/98 to-slate-50/98 backdrop-blur-xl w-[calc(100%-2rem)] max-w-full sm:max-w-2xl mx-4 my-4 sm:my-8 max-h-[90vh] sm:max-h-[85vh] rounded-3xl shadow-[0_25px_70px_rgba(15,23,42,0.4)] border-2 border-orange-200/60 p-5 sm:p-6 md:p-8 relative overflow-y-auto animate-in slide-in-from-bottom-4 duration-300",children:[(0,v.jsxs)("div",{className:"pointer-events-none absolute inset-0 overflow-hidden rounded-3xl",children:[(0,v.jsx)("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-orange-200/40 rounded-full blur-3xl"}),(0,v.jsx)("div",{className:"absolute -bottom-16 -left-16 w-36 h-36 bg-red-200/40 rounded-full blur-3xl"})]}),(0,v.jsx)("button",{onClick:()=>{m(!1),u(""),h(""),j(!1),k(null)},className:"absolute top-4 right-4 sm:top-5 sm:right-5 z-30 w-10 h-10 sm:w-11 sm:h-11 flex items-center justify-center bg-white/95 backdrop-blur-sm border-2 border-slate-200/60 rounded-full shadow-lg hover:shadow-xl hover:bg-white hover:border-slate-300 transition-all duration-200 hover:scale-110 active:scale-95 group",type:"button","aria-label":"Close modal",children:(0,v.jsx)(_.A,{className:"w-5 h-5 text-slate-600 group-hover:text-slate-800 transition-colors"})}),(0,v.jsxs)("div",{className:"relative z-10",children:[(0,v.jsxs)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,v.jsx)(C.A,{className:"text-orange-600",size:24}),"Create Notification"]}),(0,v.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),x.trim()&&p.trim()&&t){k(null),w(!0);try{const e="undefined"!==typeof __app_id?__app_id:"default-app-id",a="artifacts/".concat(e,"/public/data/notifications"),r=(0,f.rJ)(t,a);await(0,f.gS)(r,{title:x.trim(),message:p.trim(),isCritical:g,createdAt:f.Dc.now(),createdBy:s}),u(""),h(""),j(!1),m(!1),k(null)}catch(a){console.error("Error creating notification:",a),k("Failed to create notification. Please try again.")}finally{w(!1)}}},className:"space-y-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Title ",(0,v.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,v.jsx)("input",{type:"text",value:x,onChange:e=>{u(e.target.value),k(null)},placeholder:"Enter notification title",className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition duration-150",required:!0,disabled:N})]}),(0,v.jsxs)("div",{children:[(0,v.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Message ",(0,v.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,v.jsx)("textarea",{value:p,onChange:e=>{h(e.target.value),k(null)},placeholder:"Enter notification message",className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition duration-150 resize-none min-h-[120px]",required:!0,disabled:N})]}),(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)("input",{type:"checkbox",id:"isCritical",checked:g,onChange:e=>j(e.target.checked),className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500",disabled:N}),(0,v.jsxs)("label",{htmlFor:"isCritical",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[(0,v.jsx)(z.A,{className:"w-4 h-4 text-red-600"}),"Mark as Critical"]})]}),y&&(0,v.jsx)("div",{className:"p-3 bg-red-50 border border-red-300 text-red-700 rounded-xl text-sm",children:y}),(0,v.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,v.jsx)("button",{type:"button",onClick:()=>{m(!1),u(""),h(""),j(!1),k(null)},className:"flex-1 px-4 py-2.5 bg-gray-200 text-gray-800 font-semibold rounded-xl hover:bg-gray-300 transition-all duration-200",disabled:N,children:"Cancel"}),(0,v.jsx)("button",{type:"submit",disabled:!x.trim()||!p.trim()||N,className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-orange-500 to-red-600 text-white font-semibold rounded-xl hover:from-orange-600 hover:to-red-700 transition-all duration-200 shadow-md hover:shadow-lg disabled:bg-gray-400 disabled:shadow-none",children:N?"Creating...":"Create"})]})]})]})]})})]})]})};var D=s(2489),P=s(9292),I=s(9989),T=s(7133);const L=e=>{let{db:t,currentUserId:s,onRoleUpdate:r,isActive:l=!1}=e;const[o,d]=(0,a.useState)([]),[n,c]=(0,a.useState)(!0),[m,x]=(0,a.useState)(""),[p,h]=(0,a.useState)(null),[j,N]=(0,a.useState)(null),[w,k]=(0,a.useState)(null),[A,S]=(0,a.useState)(""),[C,z]=(0,a.useState)("user"),[M,L]=(0,a.useState)(null),[U,F]=(0,a.useState)(null),[G,R]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!t)return;const e="undefined"!==typeof __app_id?__app_id:"default-app-id",s="artifacts/".concat(e,"/public/data/users"),a=(0,f.rJ)(t,s),r=(0,f.aQ)(a,async s=>{const a=s.docs.map(e=>(0,b.A)({id:e.id},e.data())),r="artifacts/".concat(e,"/public/data/soccer_players"),l=(0,f.rJ)(t,r);try{const e=await(0,f.GG)(l),t=new Map;e.docs.forEach(e=>{const s=e.data();s.userId&&t.set(s.userId,s.name)});const s=a.map(e=>(0,b.A)((0,b.A)({},e),{},{playerName:t.get(e.id)||void 0}));d(s),c(!1)}catch(o){console.error("Error fetching player names:",o),d(a),c(!1)}},e=>{console.error("Error fetching users:",e),F("Failed to load users."),c(!1)});return()=>r()},[t]);const H=()=>{k(null),S(""),z("user"),F(null)},B=async()=>{if(t&&w)if(A.trim()){h(w),F(null),R(null);try{const e="undefined"!==typeof __app_id?__app_id:"default-app-id",s="artifacts/".concat(e,"/public/data/users/").concat(w),a=(0,f.H9)(t,s);await(0,f.BN)(a,{email:A.trim(),role:C},{merge:!0}),R("User details updated successfully"),k(null),r(),setTimeout(()=>{R(null)},3e3)}catch(e){console.error("Error updating user:",e),F("Failed to update user: ".concat(e.message))}finally{h(null)}}else F("Email cannot be empty.")},q=(0,T.d)(m,300),O=(0,a.useMemo)(()=>o.filter(e=>e.email.toLowerCase().includes(q.toLowerCase())),[o,q]);return(0,v.jsxs)("div",{className:"relative overflow-hidden backdrop-blur-xl p-6 sm:p-8 rounded-b-2xl rounded-t-none shadow-[0_20px_60px_rgba(15,23,42,0.18)] -mt-[1px] ".concat(l?"bg-gradient-to-br from-purple-50/95 via-pink-50/95 to-purple-50/95 border-l-2 border-r-2 border-b-2 border-purple-500/70":"bg-white/90 border border-white/70 border-t-0"),children:[(0,v.jsxs)("div",{className:"pointer-events-none absolute inset-0 opacity-60",children:[(0,v.jsx)("div",{className:"absolute -top-10 right-0 w-56 h-56 bg-purple-200/60 blur-[110px]"}),(0,v.jsx)("div",{className:"absolute bottom-0 left-4 w-64 h-64 bg-pink-200/50 blur-[120px]"})]}),(0,v.jsxs)("div",{className:"relative z-10",children:[(0,v.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[(0,v.jsxs)("h2",{className:"text-2xl sm:text-3xl font-extrabold bg-gradient-to-r from-purple-600 via-pink-600 to-rose-600 bg-clip-text text-transparent border-b-2 border-purple-200 pb-3 flex items-center",children:[(0,v.jsx)(D.A,{className:"mr-3 text-purple-600",size:28})," User Management"]}),o.length>0&&(0,v.jsxs)("div",{className:"text-sm font-semibold text-slate-600 bg-purple-50 px-4 py-2 rounded-xl border border-purple-200",children:["Total Users: ",o.length]})]}),(0,v.jsxs)("div",{className:"mb-6 p-5 bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-indigo-200 rounded-2xl shadow-md",children:[(0,v.jsx)("p",{className:"text-sm text-blue-800 font-medium mb-2",children:"User Management:"}),(0,v.jsxs)("ul",{className:"text-sm text-blue-700 list-disc list-inside space-y-1",children:[(0,v.jsx)("li",{children:"View all users who have signed in to the app"}),(0,v.jsx)("li",{children:"Edit user email and role directly from the user list"}),(0,v.jsx)("li",{children:'Toggle admin status using the "Make Admin" / "Remove Admin" button'}),(0,v.jsx)("li",{children:"Delete users (this will also delete all associated players)"})]}),(0,v.jsx)("p",{className:"text-xs text-blue-600 mt-2",children:"User documents are automatically created when users sign in for the first time."})]}),U&&(0,v.jsx)("div",{className:"mb-4 p-4 bg-gradient-to-r from-red-50 to-rose-50 border-2 border-red-300 text-red-700 rounded-2xl text-sm font-semibold shadow-md",children:U}),G&&(0,v.jsxs)("div",{className:"mb-4 p-4 bg-gradient-to-r from-emerald-50 to-teal-50 border-2 border-emerald-300 text-emerald-700 rounded-2xl text-sm font-semibold flex items-center shadow-md",children:[(0,v.jsx)(u.A,{className:"mr-2",size:18}),G]}),o.length>0&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"mb-4",children:(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)(P.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),(0,v.jsx)("input",{type:"text",placeholder:"Search by email...",value:m,onChange:e=>x(e.target.value),className:"w-full pl-12 p-3.5 border-2 border-slate-300 rounded-2xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 bg-white/80 shadow-sm"})]})}),(0,v.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto custom-scrollbar pr-2",children:O.map(e=>(0,v.jsx)("div",{className:"p-4 bg-gradient-to-r from-white to-slate-50 rounded-2xl border-2 border-slate-200 shadow-md hover:shadow-lg transition-all duration-200",children:w===e.id?(0,v.jsxs)("div",{className:"space-y-3",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email"}),(0,v.jsx)("input",{type:"email",value:A,onChange:e=>{S(e.target.value),F(null)},className:"w-full p-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 bg-white",disabled:p===e.id})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Role"}),(0,v.jsxs)("select",{value:C,onChange:e=>{z(e.target.value),F(null)},className:"w-full p-3 border-2 border-slate-300 rounded-xl bg-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200",disabled:p===e.id,children:[(0,v.jsx)("option",{value:"user",children:"Regular User"}),(0,v.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,v.jsxs)("div",{className:"flex gap-2",children:[(0,v.jsxs)("button",{onClick:B,disabled:p===e.id,className:"flex-1 px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white font-semibold rounded-xl hover:from-emerald-600 hover:to-teal-700 transition-all duration-200 shadow-md hover:shadow-lg disabled:bg-gray-400 disabled:shadow-none flex items-center justify-center gap-2",children:[(0,v.jsx)(g.A,{className:"w-4 h-4"}),(0,v.jsx)("span",{children:"Save"})]}),(0,v.jsx)("button",{onClick:H,disabled:p===e.id,className:"px-4 py-2 bg-gray-200 text-gray-800 font-semibold rounded-xl hover:bg-gray-300 transition-all duration-200",children:(0,v.jsx)(_.A,{className:"w-4 h-4"})})]})]}):(0,v.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 min-w-0",children:["admin"===e.role?(0,v.jsx)("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl shadow-md flex-shrink-0",children:(0,v.jsx)(D.A,{className:"text-white",size:20})}):(0,v.jsx)("div",{className:"p-2 bg-slate-200 rounded-xl flex-shrink-0",children:(0,v.jsx)(y,{className:"text-slate-600",size:20})}),(0,v.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,v.jsx)("p",{className:"font-bold text-slate-800 text-base sm:text-lg truncate",children:e.playerName||e.email}),(0,v.jsxs)("p",{className:"text-xs text-slate-500 font-medium break-words",children:[e.playerName&&(0,v.jsx)("span",{className:"break-all",children:e.email}),e.playerName&&(e.lastLogin||!e.lastLogin)&&(0,v.jsx)("span",{children:" \u2022 "}),e.lastLogin&&(0,v.jsxs)("span",{children:["Last login: ",e.lastLogin.toDate?e.lastLogin.toDate().toLocaleDateString():e.lastLogin.seconds?new Date(1e3*e.lastLogin.seconds).toLocaleDateString():"Never"]}),!e.lastLogin&&(0,v.jsx)("span",{children:"Last login: Never"})]}),(0,v.jsxs)("p",{className:"text-xs text-slate-400 font-medium mt-0.5 truncate",children:["ID: ",e.id]})]})]}),(0,v.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:space-x-2 sm:flex-nowrap",children:[(0,v.jsx)("span",{className:"px-3 sm:px-4 py-1.5 sm:py-2 rounded-full text-xs font-bold shadow-md whitespace-nowrap ".concat("admin"===e.role?"bg-gradient-to-r from-purple-500 to-pink-600 text-white":"bg-slate-200 text-slate-700"),children:e.role}),e.id!==s&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("button",{onClick:()=>(e=>{k(e.id),S(e.email),z(e.role),F(null)})(e),className:"p-2 bg-gradient-to-br from-blue-500 to-cyan-600 text-white hover:from-blue-600 hover:to-cyan-700 rounded-xl transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-110 flex-shrink-0",title:"Edit user",children:(0,v.jsx)(I.A,{size:16})}),(0,v.jsx)("button",{onClick:()=>(e=>{L(e),F(null)})(e),className:"p-2 bg-gradient-to-br from-red-500 to-rose-600 text-white hover:from-red-600 hover:to-rose-700 rounded-xl transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-110 flex-shrink-0",title:"Delete user",children:(0,v.jsx)(E.A,{size:16})}),(0,v.jsx)("button",{onClick:()=>(async(e,s)=>{if(t){h(e),F(null),R(null);try{var a;const l="undefined"!==typeof __app_id?__app_id:"default-app-id",i="artifacts/".concat(l,"/public/data/users/").concat(e),n=(0,f.H9)(t,i);await(0,f.BN)(n,{email:(null===(a=o.find(t=>t.id===e))||void 0===a?void 0:a.email)||"",role:s},{merge:!0}),d(t=>t.map(t=>t.id===e?(0,b.A)((0,b.A)({},t),{},{role:s}):t)),R("User role updated to ".concat(s)),r(),setTimeout(()=>{R(null)},3e3)}catch(l){console.error("Error updating user role:",l),F("Failed to update role: ".concat(l.message))}finally{h(null)}}else F("Database connection not ready.")})(e.id,"admin"===e.role?"user":"admin"),disabled:p===e.id,className:"px-2 sm:px-3 py-1.5 sm:py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xs font-bold rounded-xl hover:from-purple-700 hover:to-pink-700 disabled:bg-gray-400 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105 disabled:transform-none whitespace-nowrap flex-shrink-0",children:p===e.id?"Updating...":"admin"===e.role?"Remove Admin":"Make Admin"})]})]})]})},e.id))})]}),0===o.length&&!n&&(0,v.jsxs)("div",{className:"text-center p-8 bg-gradient-to-br from-slate-100 to-gray-100 rounded-2xl border-2 border-dashed border-slate-300",children:[(0,v.jsx)(i.A,{className:"mx-auto mb-3 text-slate-400",size:40}),(0,v.jsx)("p",{className:"text-slate-600 font-semibold mb-2",children:"No users found in the database."}),(0,v.jsx)("p",{className:"text-xs text-slate-500",children:"User documents are automatically created when users sign in. If you don't see any users, they may not have signed in yet."})]}),n&&(0,v.jsx)("div",{className:"text-center p-8 bg-gradient-to-r from-purple-100 to-pink-100 rounded-2xl border border-purple-200",children:(0,v.jsx)("p",{className:"text-purple-700 font-bold text-lg",children:"Loading users..."})}),M&&(0,v.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center z-[9999] overflow-y-auto animate-in fade-in duration-200",onClick:e=>{e.target===e.currentTarget&&L(null)},children:(0,v.jsxs)("div",{className:"bg-gradient-to-br from-slate-50/98 via-white/98 to-slate-50/98 backdrop-blur-xl w-[calc(100%-2rem)] max-w-full sm:max-w-md mx-4 my-4 sm:my-8 max-h-[90vh] sm:max-h-[85vh] rounded-3xl shadow-[0_25px_70px_rgba(15,23,42,0.4)] border-2 border-red-200/60 p-5 sm:p-6 md:p-8 relative overflow-y-auto animate-in slide-in-from-bottom-4 duration-300",onClick:e=>e.stopPropagation(),children:[(0,v.jsxs)("div",{className:"pointer-events-none absolute inset-0 overflow-hidden rounded-3xl",children:[(0,v.jsx)("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-red-200/40 rounded-full blur-3xl"}),(0,v.jsx)("div",{className:"absolute -bottom-16 -left-16 w-36 h-36 bg-rose-200/40 rounded-full blur-3xl"})]}),(0,v.jsx)("button",{onClick:()=>L(null),className:"absolute top-4 right-4 sm:top-5 sm:right-5 z-30 w-10 h-10 sm:w-11 sm:h-11 flex items-center justify-center bg-white/95 backdrop-blur-sm border-2 border-slate-200/60 rounded-full shadow-lg hover:shadow-xl hover:bg-white hover:border-slate-300 transition-all duration-200 hover:scale-110 active:scale-95 group",type:"button","aria-label":"Close modal",children:(0,v.jsx)(_.A,{className:"w-5 h-5 text-slate-600 group-hover:text-slate-800 transition-colors"})}),(0,v.jsxs)("div",{className:"relative z-10",children:[(0,v.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,v.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-red-500 to-rose-600 flex items-center justify-center shadow-lg",children:(0,v.jsx)(E.A,{className:"w-6 h-6 text-white"})}),(0,v.jsx)("h2",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 bg-clip-text text-transparent",children:"Delete User?"})]}),(0,v.jsxs)("p",{className:"text-sm sm:text-base text-slate-600 mb-2 pl-1",children:["Are you sure you want to delete ",(0,v.jsx)("span",{className:"font-semibold text-slate-800",children:M.email}),"?"]}),(0,v.jsx)("p",{className:"text-xs sm:text-sm text-red-600 mb-6 font-semibold pl-1 bg-red-50/50 p-3 rounded-xl border border-red-200",children:"\u26a0\ufe0f This will also delete all players associated with this user (players registered by them and their own player profile). This action cannot be undone."}),(0,v.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-2 sm:justify-end",children:[(0,v.jsx)("button",{onClick:()=>L(null),className:"px-5 py-2.5 bg-slate-200/80 text-slate-800 font-semibold rounded-xl hover:bg-slate-300 transition-all duration-200 hover:scale-105 active:scale-95",disabled:j===M.id,children:"Cancel"}),(0,v.jsx)("button",{onClick:async()=>{if(t&&M){N(M.id),F(null),R(null);try{const e="undefined"!==typeof __app_id?__app_id:"default-app-id",s="artifacts/".concat(e,"/public/data/soccer_players"),a=(0,f.rJ)(t,s),l=(0,f.P)(a,(0,f._M)("userId","==",M.id)),o=(await(0,f.GG)(l)).docs.map(e=>(0,f.kd)(e.ref)),d=(0,f.P)(a,(0,f._M)("registeredBy","==",M.id)),i=(await(0,f.GG)(d)).docs.map(e=>(0,f.kd)(e.ref));await Promise.all([...o,...i]);const n="artifacts/".concat(e,"/public/data/users/").concat(M.id),c=(0,f.H9)(t,n);await(0,f.kd)(c),R("User ".concat(M.email," and associated players deleted successfully")),L(null),r(),setTimeout(()=>{R(null)},3e3)}catch(e){console.error("Error deleting user:",e),F("Failed to delete user: ".concat(e.message))}finally{N(null)}}},disabled:j===M.id,className:"px-5 py-2.5 bg-gradient-to-r from-red-500 to-rose-600 text-white font-semibold rounded-xl hover:from-red-600 hover:to-rose-700 transition-all duration-200 shadow-lg hover:shadow-xl disabled:bg-gray-400 disabled:shadow-none flex items-center justify-center gap-2 transform hover:scale-105 active:scale-95",children:j===M.id?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{className:"animate-spin",children:"\u23f3"}),(0,v.jsx)("span",{children:"Deleting..."})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(E.A,{size:16}),(0,v.jsx)("span",{children:"Delete User"})]})})]})]})]})})]})]})};var U=s(5347),F=s(6245),G=s(4919);const R=e=>{let{db:t,players:s,currentUserId:r,currentUserEmail:d,isActive:n=!1}=e;const[c,m]=(0,a.useState)({}),[x,u]=(0,a.useState)(!0),[p,h]=(0,a.useState)(null),[j,N]=(0,a.useState)(null),[w,y]=(0,a.useState)(null),[A,S]=(0,a.useState)(""),[C,z]=(0,a.useState)(null),[E,M]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!t||0===s.length)return;(async()=>{u(!0);try{const e="undefined"!==typeof __app_id?__app_id:"default-app-id",a="artifacts/".concat(e,"/public/data/playerPoints"),r=(0,f.rJ)(t,a),l=await(0,f.GG)(r),o={};l.docs.forEach(e=>{const t=e.data();if(t.playerId){const e=(t.pointsHistory||[]).filter(e=>"Played in game"===e.reason&&!0===e.automatic).length;o[t.playerId]={playerId:t.playerId,playerName:t.playerName,totalPoints:t.totalPoints||0,motmAwards:t.motmAwards||0,goals:t.goals||0,assists:t.assists||0,gamesPlayed:e,pointsHistory:t.pointsHistory||[]}}}),s.forEach(e=>{o[e.id]||(o[e.id]={playerId:e.id,playerName:e.name,totalPoints:0,motmAwards:0,goals:0,assists:0,gamesPlayed:0,pointsHistory:[]})}),m(o)}catch(e){console.error("Error fetching player stats:",e),N("Failed to load player stats")}finally{u(!1)}})()},[t,s]);const D=(0,a.useMemo)(()=>s.filter(e=>{const t=c[e.id];return((null===t||void 0===t?void 0:t.playerName)||e.name||"").toLowerCase().includes(A.toLowerCase())}),[s,c,A]),I=()=>{z(null),M(null),N(null),y(null)},T=async()=>{if(t&&C&&E){h(C),N(null),y(null);try{const e="undefined"!==typeof __app_id?__app_id:"default-app-id",a="artifacts/".concat(e,"/public/data/playerPoints/").concat(C),l=(0,f.H9)(t,a),o=await(0,f.x7)(l),i=o.exists()?o.data():{},n=s.find(e=>e.id===C),c={points:E.totalPoints-(i.totalPoints||0),reason:"Admin updated stats (Goals: ".concat(E.goals,", Assists: ").concat(E.assists,", Points: ").concat(E.totalPoints,")"),addedBy:r,addedByEmail:d,addedAt:f.Dc.now(),adminEdit:!0},x=i.pointsHistory||[];0===c.points&&E.goals===(i.goals||0)&&E.assists===(i.assists||0)||x.push(c),await(0,f.BN)(l,{playerId:C,playerName:(null===n||void 0===n?void 0:n.name)||i.playerName||"Unknown",goals:E.goals,assists:E.assists,totalPoints:E.totalPoints,motmAwards:i.motmAwards||0,pointsHistory:x},{merge:!0}),m(e=>(0,b.A)((0,b.A)({},e),{},{[C]:(0,b.A)((0,b.A)({},e[C]),{},{goals:E.goals,assists:E.assists,totalPoints:E.totalPoints})})),y("Successfully updated stats for ".concat((null===n||void 0===n?void 0:n.name)||"player")),z(null),M(null),setTimeout(()=>y(null),5e3)}catch(e){console.error("Error updating player stats:",e),N("Failed to update stats: ".concat(e.message))}finally{h(null)}}};return x?(0,v.jsxs)("div",{className:"text-center py-12",children:[(0,v.jsx)("div",{className:"inline-block w-12 h-12 border-4 border-purple-300 border-t-purple-600 rounded-full animate-spin"}),(0,v.jsx)("p",{className:"mt-4 text-slate-600 font-medium",children:"Loading player stats..."})]}):(0,v.jsxs)("div",{className:"relative overflow-hidden backdrop-blur-xl p-4 sm:p-6 rounded-b-3xl rounded-t-none shadow-[0_20px_60px_rgba(15,23,42,0.15)] -mt-[1px] ".concat(n?"bg-gradient-to-br from-purple-50/95 via-indigo-50/95 to-blue-50/95 border-l-2 border-r-2 border-b-2 border-purple-500/70":"bg-white/90 border border-white/70 border-t-0"),children:[(0,v.jsxs)("div",{className:"pointer-events-none absolute inset-0 opacity-60",children:[(0,v.jsx)("div",{className:"absolute -top-16 -right-10 w-48 h-48 bg-purple-200/50 blur-[90px]"}),(0,v.jsx)("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-indigo-200/50 blur-[80px]"})]}),(0,v.jsxs)("div",{className:"relative z-10",children:[(0,v.jsx)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4 mb-6",children:(0,v.jsxs)("div",{children:[(0,v.jsxs)("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold tracking-tight bg-gradient-to-r from-purple-600 via-indigo-600 to-blue-600 bg-clip-text text-transparent pb-2 flex items-center gap-2",children:[(0,v.jsx)(o.A,{className:"text-purple-600",size:24}),"Edit Player Statistics"]}),(0,v.jsx)("p",{className:"text-xs sm:text-sm font-medium text-slate-600 mt-2",children:"Update goals, assists, points, and games for any player"})]})}),w&&(0,v.jsxs)("div",{className:"mb-4 p-4 bg-gradient-to-r from-emerald-50 to-teal-50 border-2 border-emerald-300 text-emerald-700 rounded-2xl text-sm font-semibold flex items-center gap-2 shadow-md",children:[(0,v.jsx)(U.A,{className:"w-4 h-4"}),w]}),j&&(0,v.jsx)("div",{className:"mb-4 p-4 bg-gradient-to-r from-red-50 to-rose-50 border-2 border-red-300 text-red-700 rounded-2xl text-sm font-semibold shadow-md",children:j}),(0,v.jsx)("div",{className:"mb-6",children:(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)(P.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),(0,v.jsx)("input",{type:"text",placeholder:"Search players by name...",value:A,onChange:e=>S(e.target.value),className:"w-full pl-12 pr-12 p-3.5 border-2 border-slate-300 rounded-2xl focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500 transition-all duration-200 bg-white/80 backdrop-blur-sm shadow-sm hover:shadow-md text-sm font-medium"}),A&&(0,v.jsx)("button",{onClick:()=>S(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1.5 hover:bg-slate-100 rounded-full transition",type:"button",children:(0,v.jsx)(F.A,{className:"text-slate-400 hover:text-slate-600",size:18})})]})}),0===D.length?(0,v.jsxs)("div",{className:"text-center p-12 bg-gradient-to-br from-slate-100 to-purple-50 rounded-2xl border-2 border-dashed border-purple-200 shadow-lg",children:[(0,v.jsx)(i.A,{className:"mx-auto text-purple-400 mb-4",size:48}),(0,v.jsx)("p",{className:"text-slate-600 font-semibold text-lg mb-2",children:"No players found"}),(0,v.jsx)("p",{className:"text-sm text-slate-500",children:A?"Try adjusting your search query":"No players available"})]}):(0,v.jsx)("div",{className:"space-y-3 max-h-[600px] overflow-y-auto custom-scrollbar pr-2",children:D.map(e=>{const t=c[e.id],s=C===e.id;return(0,v.jsx)("div",{className:"p-5 rounded-2xl border-2 shadow-md hover:shadow-lg transition-all duration-200 ".concat(s?"bg-gradient-to-r from-purple-50 via-indigo-50 to-blue-50 border-purple-300":"bg-gradient-to-r from-white to-purple-50/30 border-purple-200/60"),children:s&&E?(0,v.jsxs)("div",{className:"space-y-5",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,v.jsxs)("div",{className:"flex items-center gap-3",children:[(0,v.jsx)("div",{className:"p-2.5 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl shadow-lg",children:(0,v.jsx)(i.A,{className:"text-white",size:22})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"font-bold text-lg text-slate-800",children:(null===t||void 0===t?void 0:t.playerName)||e.name}),(0,v.jsx)("p",{className:"text-xs text-slate-500 font-medium",children:e.position})]})]}),(0,v.jsx)("button",{onClick:I,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",type:"button",children:(0,v.jsx)(_.A,{className:"text-slate-600",size:20})})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,v.jsxs)("div",{className:"p-4 bg-white/80 backdrop-blur-sm rounded-xl border-2 border-red-200/60 shadow-sm",children:[(0,v.jsxs)("label",{className:"block text-xs font-bold text-slate-700 mb-2 flex items-center gap-2",children:[(0,v.jsx)(l.A,{className:"text-red-500",size:16}),"Goals"]}),(0,v.jsx)("input",{type:"number",min:"0",value:E.goals,onChange:e=>M((0,b.A)((0,b.A)({},E),{},{goals:Math.max(0,parseInt(e.target.value)||0)})),className:"w-full p-3 border-2 border-red-200 rounded-lg focus:ring-2 focus:ring-red-500/50 focus:border-red-500 text-base font-bold text-red-600 transition-all"})]}),(0,v.jsxs)("div",{className:"p-4 bg-white/80 backdrop-blur-sm rounded-xl border-2 border-blue-200/60 shadow-sm",children:[(0,v.jsxs)("label",{className:"block text-xs font-bold text-slate-700 mb-2 flex items-center gap-2",children:[(0,v.jsx)(k.A,{className:"text-blue-500",size:16}),"Assists"]}),(0,v.jsx)("input",{type:"number",min:"0",value:E.assists,onChange:e=>M((0,b.A)((0,b.A)({},E),{},{assists:Math.max(0,parseInt(e.target.value)||0)})),className:"w-full p-3 border-2 border-blue-200 rounded-lg focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 text-base font-bold text-blue-600 transition-all"})]}),(0,v.jsxs)("div",{className:"p-4 bg-white/80 backdrop-blur-sm rounded-xl border-2 border-amber-200/60 shadow-sm",children:[(0,v.jsxs)("label",{className:"block text-xs font-bold text-slate-700 mb-2 flex items-center gap-2",children:[(0,v.jsx)(G.A,{className:"text-amber-500",size:16}),"Points"]}),(0,v.jsx)("input",{type:"number",min:"0",value:E.totalPoints,onChange:e=>M((0,b.A)((0,b.A)({},E),{},{totalPoints:Math.max(0,parseInt(e.target.value)||0)})),className:"w-full p-3 border-2 border-amber-200 rounded-lg focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 text-base font-bold text-amber-600 transition-all"})]})]}),(0,v.jsx)("div",{className:"p-4 bg-gradient-to-r from-slate-50 to-emerald-50/50 rounded-xl border-2 border-emerald-200/60 shadow-sm",children:(0,v.jsxs)("p",{className:"text-xs font-semibold text-slate-700 flex items-center gap-2",children:[(0,v.jsx)(i.A,{className:"text-emerald-500",size:16}),(0,v.jsxs)("span",{children:["Games Played: ",(0,v.jsx)("strong",{className:"text-emerald-700",children:(null===t||void 0===t?void 0:t.gamesPlayed)||0})," (calculated from points history)"]})]})}),(0,v.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t-2 border-purple-200",children:[(0,v.jsx)("button",{onClick:I,disabled:p===e.id,className:"px-5 py-2.5 text-sm font-semibold text-slate-700 bg-slate-100 rounded-xl hover:bg-slate-200 transition-all duration-200 disabled:opacity-50",children:"Cancel"}),(0,v.jsx)("button",{onClick:T,disabled:p===e.id,className:"px-5 py-2.5 text-sm font-semibold text-white bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl hover:from-purple-700 hover:to-indigo-700 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 flex items-center gap-2 transform hover:scale-105 active:scale-95",children:p===e.id?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(g.A,{size:16}),"Save Changes"]})})]})]}):(0,v.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,v.jsxs)("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[(0,v.jsx)("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl shadow-lg flex-shrink-0",children:(0,v.jsx)(i.A,{className:"text-white",size:22})}),(0,v.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,v.jsx)("h4",{className:"font-bold text-lg text-slate-800 truncate",children:(null===t||void 0===t?void 0:t.playerName)||e.name}),(0,v.jsx)("p",{className:"text-xs text-slate-500 font-medium mt-0.5",children:e.position})]})]}),(0,v.jsxs)("div",{className:"grid grid-cols-4 gap-3 sm:gap-4 flex-shrink-0 w-full sm:w-auto",children:[(0,v.jsxs)("div",{className:"text-center p-3 bg-gradient-to-br from-red-50 to-rose-50 rounded-xl border-2 border-red-200/60 shadow-sm",children:[(0,v.jsx)("div",{className:"text-xs text-slate-600 font-semibold mb-1",children:"Goals"}),(0,v.jsx)("div",{className:"text-2xl font-bold text-red-600",children:(null===t||void 0===t?void 0:t.goals)||0})]}),(0,v.jsxs)("div",{className:"text-center p-3 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl border-2 border-blue-200/60 shadow-sm",children:[(0,v.jsx)("div",{className:"text-xs text-slate-600 font-semibold mb-1",children:"Assists"}),(0,v.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null===t||void 0===t?void 0:t.assists)||0})]}),(0,v.jsxs)("div",{className:"text-center p-3 bg-gradient-to-br from-amber-50 to-yellow-50 rounded-xl border-2 border-amber-200/60 shadow-sm",children:[(0,v.jsx)("div",{className:"text-xs text-slate-600 font-semibold mb-1",children:"Points"}),(0,v.jsx)("div",{className:"text-2xl font-bold text-amber-600",children:(null===t||void 0===t?void 0:t.totalPoints)||0})]}),(0,v.jsxs)("div",{className:"text-center p-3 bg-gradient-to-br from-emerald-50 to-green-50 rounded-xl border-2 border-emerald-200/60 shadow-sm",children:[(0,v.jsx)("div",{className:"text-xs text-slate-600 font-semibold mb-1",children:"Games"}),(0,v.jsx)("div",{className:"text-2xl font-bold text-emerald-600",children:(null===t||void 0===t?void 0:t.gamesPlayed)||0})]})]}),(0,v.jsxs)("button",{onClick:()=>(e=>{const t=c[e];t&&(z(e),M({goals:t.goals||0,assists:t.assists||0,totalPoints:t.totalPoints||0}),N(null),y(null))})(e.id),disabled:null!==p,className:"px-4 py-2.5 text-sm font-semibold text-white bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl hover:from-purple-700 hover:to-indigo-700 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 flex items-center gap-2 transform hover:scale-105 active:scale-95 sm:flex-shrink-0 w-full sm:w-auto justify-center",children:[(0,v.jsx)(g.A,{size:16}),"Edit"]})]})},e.id)})})]})]})},H=(0,c.A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var B=s(8629),q=s(3107);const O=e=>{let{db:t,currentUserId:s,currentUserEmail:l,isActive:o=!1}=e;const[i,n]=(0,a.useState)([]),[c,m]=(0,a.useState)(!0),[x,u]=(0,a.useState)(null),[p,h]=(0,a.useState)(null),[j,N]=(0,a.useState)(null),[w,y]=(0,a.useState)(!1),[k,A]=(0,a.useState)(null),[S,z]=(0,a.useState)(""),[M,D]=(0,a.useState)({gameDate:(0,q.sq)(new Date),team1Name:"",team1Score:0,team2Name:"",team2Score:0});(0,a.useEffect)(()=>{if(!t)return;m(!0);const e=B.ON.gameResults(),s=(0,f.rJ)(t,e),a=(0,f.aQ)((0,f.P)(s,(0,f.My)("gameDate","desc")),e=>{const t=e.docs.map(e=>(0,b.A)({id:e.id},e.data()));n(t),m(!1)},e=>{console.error("Error fetching game results:",e),h("Failed to load game results"),m(!1)});return()=>a()},[t]);const I=i.filter(e=>{const t=S.toLowerCase();return e.team1Name.toLowerCase().includes(t)||e.team2Name.toLowerCase().includes(t)||e.gameDate.includes(t)}),T=()=>{y(!1),A(null),h(null),N(null)},L=Array.from(new Set([...i.map(e=>e.team1Name),...i.map(e=>e.team2Name),M.team1Name,M.team2Name])).filter(Boolean).sort();return c?(0,v.jsxs)("div",{className:"text-center py-12",children:[(0,v.jsx)("div",{className:"inline-block w-12 h-12 border-4 border-purple-300 border-t-purple-600 rounded-full animate-spin"}),(0,v.jsx)("p",{className:"mt-4 text-slate-600 font-medium",children:"Loading game results..."})]}):(0,v.jsxs)("div",{className:"relative overflow-hidden backdrop-blur-xl p-4 sm:p-6 rounded-b-3xl rounded-t-none shadow-[0_20px_60px_rgba(15,23,42,0.15)] -mt-[1px] ".concat(o?"bg-gradient-to-br from-purple-50/95 via-indigo-50/95 to-blue-50/95 border-l-2 border-r-2 border-b-2 border-purple-500/70":"bg-white/90 border border-white/70 border-t-0"),children:[(0,v.jsxs)("div",{className:"pointer-events-none absolute inset-0 opacity-60",children:[(0,v.jsx)("div",{className:"absolute -top-16 -right-10 w-48 h-48 bg-purple-200/50 blur-[90px]"}),(0,v.jsx)("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-indigo-200/50 blur-[80px]"})]}),(0,v.jsxs)("div",{className:"relative z-10",children:[(0,v.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4 mb-6",children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold tracking-tight bg-gradient-to-r from-purple-600 via-indigo-600 to-blue-600 bg-clip-text text-transparent pb-2 flex items-center gap-2",children:[(0,v.jsx)(d.A,{className:"text-purple-600",size:24}),"Manage League Table"]}),(0,v.jsx)("p",{className:"text-xs sm:text-sm font-medium text-slate-600 mt-2",children:"Edit game results to update league standings"})]}),(0,v.jsxs)("button",{onClick:()=>{A(null),D({gameDate:(0,q.sq)(new Date),team1Name:"",team1Score:0,team2Name:"",team2Score:0}),h(null),N(null),y(!0)},className:"px-5 py-3 text-sm font-semibold text-white bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl hover:from-purple-700 hover:to-indigo-700 transition-all duration-200 shadow-md hover:shadow-lg flex items-center gap-2 transform hover:scale-105 active:scale-95",children:[(0,v.jsx)(C.A,{size:18}),"Add Game Result"]})]}),j&&(0,v.jsxs)("div",{className:"mb-4 p-4 bg-gradient-to-r from-emerald-50 to-teal-50 border-2 border-emerald-300 text-emerald-700 rounded-2xl text-sm font-semibold flex items-center gap-2 shadow-md",children:[(0,v.jsx)(d.A,{className:"w-4 h-4"}),j]}),p&&(0,v.jsx)("div",{className:"mb-4 p-4 bg-gradient-to-r from-red-50 to-rose-50 border-2 border-red-300 text-red-700 rounded-2xl text-sm font-semibold shadow-md",children:p}),(0,v.jsx)("div",{className:"mb-6",children:(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)(P.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),(0,v.jsx)("input",{type:"text",placeholder:"Search by team name or date...",value:S,onChange:e=>z(e.target.value),className:"w-full pl-12 pr-12 p-3.5 border-2 border-slate-300 rounded-2xl focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500 transition-all duration-200 bg-white/80 backdrop-blur-sm shadow-sm hover:shadow-md text-sm font-medium"}),S&&(0,v.jsx)("button",{onClick:()=>z(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1.5 hover:bg-slate-100 rounded-full transition",type:"button",children:(0,v.jsx)(_.A,{className:"text-slate-400 hover:text-slate-600",size:18})})]})}),0===I.length?(0,v.jsxs)("div",{className:"text-center p-12 bg-gradient-to-br from-slate-100 to-purple-50 rounded-2xl border-2 border-dashed border-purple-200 shadow-lg",children:[(0,v.jsx)(d.A,{className:"mx-auto text-purple-400 mb-4",size:48}),(0,v.jsx)("p",{className:"text-slate-600 font-semibold text-lg mb-2",children:S?"No game results found matching your search":"No game results yet"}),!S&&(0,v.jsx)("p",{className:"text-sm text-slate-500",children:"Add a game result to get started"})]}):(0,v.jsx)("div",{className:"space-y-3 max-h-[600px] overflow-y-auto custom-scrollbar pr-2",children:I.map(e=>(0,v.jsx)("div",{className:"p-5 rounded-2xl border-2 border-purple-200/60 bg-gradient-to-r from-white to-purple-50/30 shadow-md hover:shadow-lg transition-all duration-200",children:(0,v.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,v.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,v.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,v.jsx)("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl shadow-md",children:(0,v.jsx)(r.A,{className:"text-white",size:18})}),(0,v.jsx)("span",{className:"text-sm font-bold text-slate-600 uppercase tracking-wide",children:e.gameDate})]}),(0,v.jsxs)("div",{className:"flex items-center gap-4 text-xl font-bold text-slate-800",children:[(0,v.jsx)("span",{className:"flex-1 text-right truncate pr-2",children:e.team1Name}),(0,v.jsxs)("div",{className:"flex items-center gap-2 min-w-[80px] justify-center",children:[(0,v.jsx)("span",{className:"text-2xl font-black bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent",children:e.team1Score}),(0,v.jsx)("span",{className:"text-purple-400 font-bold",children:"-"}),(0,v.jsx)("span",{className:"text-2xl font-black bg-gradient-to-r from-indigo-600 to-blue-600 bg-clip-text text-transparent",children:e.team2Score})]}),(0,v.jsx)("span",{className:"flex-1 text-left truncate pl-2",children:e.team2Name})]})]}),(0,v.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,v.jsx)("button",{onClick:()=>(e=>{A(e),D({gameDate:e.gameDate,team1Name:e.team1Name,team1Score:e.team1Score,team2Name:e.team2Name,team2Score:e.team2Score}),h(null),N(null),y(!0)})(e),disabled:null!==x,className:"p-2.5 bg-gradient-to-br from-blue-500 to-cyan-600 text-white rounded-xl hover:from-blue-600 hover:to-cyan-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-110 active:scale-95 disabled:opacity-50",type:"button",title:"Edit game result",children:(0,v.jsx)(H,{size:18})}),(0,v.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete the game result:\n".concat(e.team1Name," ").concat(e.team1Score," - ").concat(e.team2Score," ").concat(e.team2Name,"\n\nThis action cannot be undone."))&&t){u(e.id),h(null),N(null);try{"undefined"!==typeof __app_id&&__app_id;const s=B.ON.gameResults(),a=(0,f.H9)(t,"".concat(s,"/").concat(e.id));await(0,f.kd)(a),N("Game result deleted successfully"),setTimeout(()=>N(null),5e3)}catch(s){console.error("Error deleting game result:",s),h("Failed to delete game result: ".concat(s.message))}finally{u(null)}}})(e),disabled:x===e.id||null!==x,className:"p-2.5 bg-gradient-to-br from-red-500 to-rose-600 text-white rounded-xl hover:from-red-600 hover:to-rose-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-110 active:scale-95 disabled:opacity-50",type:"button",title:"Delete game result",children:x===e.id?(0,v.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,v.jsx)(E.A,{size:18})})]})]})},e.id))}),w&&(0,v.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center z-[9999] overflow-y-auto animate-in fade-in duration-200",onClick:e=>{e.target===e.currentTarget&&T()},children:(0,v.jsxs)("div",{className:"bg-gradient-to-br from-slate-50/98 via-white/98 to-slate-50/98 backdrop-blur-xl w-[calc(100%-2rem)] max-w-full sm:max-w-2xl mx-4 my-4 sm:my-8 max-h-[90vh] rounded-3xl shadow-[0_25px_70px_rgba(15,23,42,0.4)] border-2 border-purple-200/60 p-5 sm:p-6 md:p-8 relative overflow-y-auto animate-in slide-in-from-bottom-4 duration-300",onClick:e=>e.stopPropagation(),children:[(0,v.jsxs)("div",{className:"pointer-events-none absolute inset-0 overflow-hidden rounded-3xl",children:[(0,v.jsx)("div",{className:"absolute -top-24 -right-24 w-56 h-56 bg-purple-300/30 rounded-full blur-3xl"}),(0,v.jsx)("div",{className:"absolute -bottom-20 -left-20 w-48 h-48 bg-indigo-300/30 rounded-full blur-3xl"})]}),(0,v.jsx)("button",{onClick:T,className:"absolute top-4 right-4 sm:top-5 sm:right-5 z-30 w-10 h-10 sm:w-11 sm:h-11 flex items-center justify-center bg-white/95 backdrop-blur-sm border-2 border-slate-200/60 rounded-full shadow-lg hover:shadow-xl hover:bg-white hover:border-slate-300 transition-all duration-200 hover:scale-110 active:scale-95 group",type:"button","aria-label":"Close modal",children:(0,v.jsx)(_.A,{className:"w-5 h-5 text-slate-600 group-hover:text-slate-800 transition-colors"})}),(0,v.jsxs)("div",{className:"relative z-10",children:[(0,v.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,v.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center shadow-xl",children:(0,v.jsx)(d.A,{className:"w-7 h-7 text-white"})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h2",{className:"text-2xl sm:text-3xl font-black bg-gradient-to-r from-purple-700 via-indigo-700 to-blue-700 bg-clip-text text-transparent mb-1",children:k?"Edit Game Result":"Add Game Result"}),(0,v.jsx)("p",{className:"text-xs sm:text-sm text-slate-500 font-medium",children:k?"Update the game result below":"Enter the game details below"})]})]}),(0,v.jsxs)("div",{className:"space-y-5",children:[(0,v.jsxs)("div",{className:"p-5 bg-gradient-to-r from-purple-50/80 via-indigo-50/80 to-blue-50/80 backdrop-blur-sm border-2 border-purple-200/60 rounded-2xl shadow-lg",children:[(0,v.jsxs)("label",{className:"block text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[(0,v.jsx)(r.A,{className:"text-purple-600",size:18}),"Game Date"]}),(0,v.jsx)("input",{type:"date",value:M.gameDate,onChange:e=>D((0,b.A)((0,b.A)({},M),{},{gameDate:e.target.value})),className:"w-full p-3.5 border-2 border-purple-200 rounded-xl focus:ring-4 focus:ring-purple-500/30 focus:border-purple-500 transition-all duration-200 bg-white/90 backdrop-blur-sm shadow-sm hover:shadow-md text-sm font-medium",required:!0})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[(0,v.jsxs)("div",{className:"p-5 bg-gradient-to-r from-red-50/80 to-rose-50/80 backdrop-blur-sm border-2 border-red-200/60 rounded-2xl shadow-lg",children:[(0,v.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"Team 1 Name"}),(0,v.jsx)("input",{type:"text",value:M.team1Name,onChange:e=>D((0,b.A)((0,b.A)({},M),{},{team1Name:e.target.value})),placeholder:"Enter team name",list:"team-names",className:"w-full p-3.5 border-2 border-red-200 rounded-xl focus:ring-4 focus:ring-red-500/30 focus:border-red-500 transition-all duration-200 bg-white/90 backdrop-blur-sm shadow-sm hover:shadow-md text-sm font-medium",required:!0}),(0,v.jsx)("datalist",{id:"team-names",children:L.map(e=>(0,v.jsx)("option",{value:e},e))})]}),(0,v.jsxs)("div",{className:"p-5 bg-gradient-to-r from-blue-50/80 to-cyan-50/80 backdrop-blur-sm border-2 border-blue-200/60 rounded-2xl shadow-lg",children:[(0,v.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"Team 2 Name"}),(0,v.jsx)("input",{type:"text",value:M.team2Name,onChange:e=>D((0,b.A)((0,b.A)({},M),{},{team2Name:e.target.value})),placeholder:"Enter team name",list:"team-names",className:"w-full p-3.5 border-2 border-blue-200 rounded-xl focus:ring-4 focus:ring-blue-500/30 focus:border-blue-500 transition-all duration-200 bg-white/90 backdrop-blur-sm shadow-sm hover:shadow-md text-sm font-medium",required:!0})]})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[(0,v.jsxs)("div",{className:"p-5 bg-gradient-to-r from-amber-50/80 to-yellow-50/80 backdrop-blur-sm border-2 border-amber-200/60 rounded-2xl shadow-lg",children:[(0,v.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"Team 1 Score"}),(0,v.jsx)("input",{type:"number",min:"0",value:M.team1Score,onChange:e=>D((0,b.A)((0,b.A)({},M),{},{team1Score:parseInt(e.target.value)||0})),className:"w-full p-3.5 border-2 border-amber-200 rounded-xl focus:ring-4 focus:ring-amber-500/30 focus:border-amber-500 transition-all duration-200 bg-white/90 backdrop-blur-sm shadow-sm hover:shadow-md text-lg font-bold text-amber-700",required:!0})]}),(0,v.jsxs)("div",{className:"p-5 bg-gradient-to-r from-emerald-50/80 to-green-50/80 backdrop-blur-sm border-2 border-emerald-200/60 rounded-2xl shadow-lg",children:[(0,v.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"Team 2 Score"}),(0,v.jsx)("input",{type:"number",min:"0",value:M.team2Score,onChange:e=>D((0,b.A)((0,b.A)({},M),{},{team2Score:parseInt(e.target.value)||0})),className:"w-full p-3.5 border-2 border-emerald-200 rounded-xl focus:ring-4 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all duration-200 bg-white/90 backdrop-blur-sm shadow-sm hover:shadow-md text-lg font-bold text-emerald-700",required:!0})]})]}),p&&(0,v.jsxs)("div",{className:"p-4 bg-gradient-to-r from-red-50 to-rose-50 border-2 border-red-300/80 rounded-xl text-sm font-bold shadow-lg flex items-start gap-3",children:[(0,v.jsx)("div",{className:"w-5 h-5 rounded-full bg-red-500 flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,v.jsx)(_.A,{className:"w-3 h-3 text-white"})}),(0,v.jsx)("span",{className:"text-red-800",children:p})]}),(0,v.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t-2 border-purple-200",children:[(0,v.jsx)("button",{onClick:T,disabled:"save"===x,className:"px-5 py-2.5 text-sm font-semibold text-slate-700 bg-slate-100 rounded-xl hover:bg-slate-200 transition-all duration-200 disabled:opacity-50",children:"Cancel"}),(0,v.jsx)("button",{onClick:async()=>{if(t)if(M.team1Name&&M.team2Name)if(M.team1Name!==M.team2Name)if(M.team1Score<0||M.team2Score<0)h("Scores must be non-negative numbers");else{u("save"),h(null),N(null);try{"undefined"!==typeof __app_id&&__app_id;const e=B.ON.gameResults();if(k){const s=(0,f.H9)(t,"".concat(e,"/").concat(k.id));await(0,f.mZ)(s,{gameDate:M.gameDate,team1Name:M.team1Name,team1Score:M.team1Score,team2Name:M.team2Name,team2Score:M.team2Score,updatedAt:f.Dc.now(),updatedBy:l}),N("Game result updated successfully")}else{if(i.find(e=>e.gameDate===M.gameDate&&(e.team1Name===M.team1Name&&e.team2Name===M.team2Name||e.team1Name===M.team2Name&&e.team2Name===M.team1Name)))return h("A game result already exists for these teams on this date"),void u(null);const s=(0,f.rJ)(t,e);await(0,f.gS)(s,{gameDate:M.gameDate,team1Name:M.team1Name,team1Score:M.team1Score,team2Name:M.team2Name,team2Score:M.team2Score,createdAt:f.Dc.now(),createdBy:l}),N("Game result added successfully")}y(!1),setTimeout(()=>N(null),5e3)}catch(e){console.error("Error saving game result:",e),h("Failed to save game result: ".concat(e.message))}finally{u(null)}}else h("Teams must be different");else h("Please enter both team names")},disabled:"save"===x,className:"px-5 py-2.5 text-sm font-semibold text-white bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl hover:from-purple-700 hover:to-indigo-700 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 flex items-center gap-2 transform hover:scale-105 active:scale-95",children:"save"===x?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(g.A,{size:16}),k?"Update":"Add"," Game Result"]})})]})]})]})]})})]})]})},J=e=>{let{db:t,userId:s,userEmail:c,userRole:b,onRoleUpdate:h,players:g,isActive:f=!1,onResetAvailability:j}=e;const[N,y]=(0,a.useState)("schedule"),[k,A]=(0,a.useState)(!1),[_,C]=(0,a.useState)(null),z=g.filter(e=>"available"===e.availabilityStatus||!0===e.isAvailable).length,E=[{id:"schedule",label:"Game Schedule",icon:(0,v.jsx)(r.A,{className:"w-5 h-5"}),description:"Manage game times and locations"},{id:"review",label:"Review Submissions",icon:(0,v.jsx)(l.A,{className:"w-5 h-5"}),description:"Approve goals & assists"},{id:"playerStats",label:"Player Stats",icon:(0,v.jsx)(o.A,{className:"w-5 h-5"}),description:"Edit player statistics"},{id:"leagueTable",label:"League Table",icon:(0,v.jsx)(d.A,{className:"w-5 h-5"}),description:"Manage game results"},{id:"users",label:"User Management",icon:(0,v.jsx)(i.A,{className:"w-5 h-5"}),description:"Manage users and roles"},{id:"notifications",label:"Notifications",icon:(0,v.jsx)(n.A,{className:"w-5 h-5"}),description:"Send announcements"}];return(0,v.jsxs)("div",{className:"relative overflow-hidden backdrop-blur-xl rounded-b-3xl rounded-t-none shadow-[0_20px_60px_rgba(15,23,42,0.15)] -mt-[1px] ".concat(f?"bg-gradient-to-br from-purple-50/95 via-pink-50/95 to-purple-50/95 border-l-2 border-r-2 border-b-2 border-purple-500/70":"bg-white/90 border border-white/70 border-t-0"),children:[(0,v.jsxs)("div",{className:"pointer-events-none absolute inset-0 opacity-60",children:[(0,v.jsx)("div",{className:"absolute -top-16 -right-10 w-48 h-48 bg-purple-200/50 blur-[90px]"}),(0,v.jsx)("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-pink-200/50 blur-[80px]"})]}),(0,v.jsxs)("div",{className:"relative z-10 p-4 sm:p-6",children:[(0,v.jsx)("div",{className:"mb-6",children:(0,v.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,v.jsx)("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl shadow-lg",children:(0,v.jsx)(m,{className:"text-white",size:28})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold tracking-tight bg-gradient-to-r from-purple-600 via-pink-600 to-purple-600 bg-clip-text text-transparent",children:"Admin Dashboard"}),(0,v.jsx)("p",{className:"text-xs sm:text-sm font-medium text-slate-600 mt-1",children:"Manage your soccer club settings and activities"})]})]})}),(0,v.jsx)("div",{className:"mb-6",children:(0,v.jsxs)("div",{className:"flex flex-wrap gap-2 sm:gap-2 p-2.5 sm:p-3 bg-gradient-to-b from-white/90 via-white/85 to-white/90 backdrop-blur-xl rounded-2xl shadow-[0_8px_24px_rgba(15,23,42,0.1),0_0_0_1px_rgba(255,255,255,0.5)_inset] border-2 border-purple-200/40 relative",children:[(0,v.jsx)("div",{className:"absolute top-0 left-0 right-0 h-[2px] bg-gradient-to-r from-purple-400/40 via-pink-400/50 to-purple-400/40 rounded-t-2xl"}),E.map(e=>(0,v.jsxs)("button",{onClick:()=>y(e.id),className:"group relative flex-1 min-w-[140px] sm:flex-initial flex flex-col sm:flex-row items-center justify-center gap-2 px-5 py-3 rounded-xl font-semibold text-sm transition-all duration-300 overflow-hidden ".concat(N===e.id?"bg-gradient-to-br from-purple-600 via-pink-600 to-purple-700 text-white shadow-[0_6px_20px_rgba(168,85,247,0.35),0_0_0_1px_rgba(255,255,255,0.1)_inset] ring-2 ring-purple-400/50":"bg-white/60 text-slate-700 hover:bg-gradient-to-br hover:from-purple-50/80 hover:via-pink-50/80 hover:to-purple-50/80 hover:text-purple-800 hover:shadow-lg hover:ring-1 hover:ring-purple-200/50 border border-transparent hover:border-purple-100/50"),children:[N===e.id&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 via-white/10 to-transparent"}),(0,v.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-white/30 to-transparent"})]}),(0,v.jsx)("span",{className:"relative transition-all duration-300 ".concat(N===e.id?"text-white scale-110 drop-shadow-sm":"text-purple-600 group-hover:scale-110"),children:e.icon}),(0,v.jsxs)("div",{className:"flex flex-col items-center sm:items-start relative",children:[(0,v.jsx)("span",{className:"font-semibold",children:e.label}),(0,v.jsx)("span",{className:"text-xs ".concat(N===e.id?"text-purple-100/90":"text-slate-500"," hidden sm:block"),children:e.description})]})]},e.id))]})}),(0,v.jsx)("div",{className:"h-[1px] bg-gradient-to-r from-transparent via-purple-300/30 to-transparent mb-4"}),(0,v.jsxs)("div",{className:"min-h-[600px] relative",children:["schedule"===N&&(0,v.jsxs)("div",{className:"animate-in fade-in duration-300 space-y-6",children:[(0,v.jsx)(w,{db:t,userId:s,userEmail:c,isActive:f}),j&&(0,v.jsxs)("div",{className:"p-5 bg-gradient-to-br from-slate-50 via-white to-slate-50 rounded-2xl border-2 border-slate-200/60 shadow-lg",children:[(0,v.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,v.jsxs)("div",{className:"flex items-start gap-3",children:[(0,v.jsx)("div",{className:"p-2.5 bg-gradient-to-br from-slate-500 to-slate-600 rounded-xl shadow-md",children:(0,v.jsx)(x,{className:"w-5 h-5 text-white"})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h3",{className:"font-bold text-slate-800 text-base",children:"Reset Player Availability"}),(0,v.jsx)("p",{className:"text-sm text-slate-600 mt-0.5",children:'Reset all players with "Playing" status back to "No Vote"'}),(0,v.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[(0,v.jsx)("span",{className:"font-semibold text-emerald-600",children:z})," player",1!==z?"s":"",' currently marked as "Playing"']})]})]}),(0,v.jsx)("button",{onClick:async()=>{if(j){A(!0),C(null);try{const e=await j();C(e),setTimeout(()=>C(null),5e3)}catch(e){C({success:!1,count:0,message:"An error occurred while resetting."})}finally{A(!1)}}},disabled:k||0===z,className:"flex items-center gap-2 px-5 py-2.5 rounded-xl font-semibold text-sm transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-[1.02] active:scale-[0.98] ".concat(0===z?"bg-slate-200 text-slate-500 cursor-not-allowed":"bg-gradient-to-r from-slate-600 to-slate-700 text-white hover:from-slate-700 hover:to-slate-800"),children:k?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(x,{className:"w-4 h-4 animate-spin"}),"Resetting..."]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(x,{className:"w-4 h-4"}),"Reset to No Vote"]})})]}),_&&(0,v.jsxs)("div",{className:"mt-4 p-3 rounded-xl flex items-center gap-2 text-sm font-medium ".concat(_.success?"bg-emerald-50 border border-emerald-200 text-emerald-700":"bg-red-50 border border-red-200 text-red-700"),children:[_.success?(0,v.jsx)(u.A,{className:"w-4 h-4 flex-shrink-0"}):(0,v.jsx)(p.A,{className:"w-4 h-4 flex-shrink-0"}),(0,v.jsx)("span",{children:_.message}),_.players&&_.players.length>0&&(0,v.jsxs)("span",{className:"text-xs opacity-80 ml-1",children:["(",_.players.slice(0,3).join(", "),_.players.length>3?", +".concat(_.players.length-3," more"):"",")"]})]})]})]}),"review"===N&&(0,v.jsx)("div",{className:"animate-in fade-in duration-300 -mx-4 sm:-mx-6",children:(0,v.jsx)(S,{db:t,currentUserId:s,currentUserEmail:c,isActive:f})}),"users"===N&&(0,v.jsx)("div",{className:"animate-in fade-in duration-300 -mx-4 sm:-mx-6",children:(0,v.jsx)(L,{db:t,currentUserId:s,onRoleUpdate:h,isActive:f})}),"playerStats"===N&&(0,v.jsx)("div",{className:"animate-in fade-in duration-300 -mx-4 sm:-mx-6",children:(0,v.jsx)(R,{db:t,players:g,currentUserId:s,currentUserEmail:c,isActive:f})}),"leagueTable"===N&&(0,v.jsx)("div",{className:"animate-in fade-in duration-300 -mx-4 sm:-mx-6",children:(0,v.jsx)(O,{db:t,currentUserId:s,currentUserEmail:c,isActive:f})}),"notifications"===N&&(0,v.jsx)("div",{className:"animate-in fade-in duration-300 -mx-4 sm:-mx-6",children:(0,v.jsx)(M,{db:t,userId:s,userEmail:c,userRole:b,isActive:f})})]})]})]})}},2054:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3165:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},4919:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},5088:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},6108:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]])},7033:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},8006:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},8646:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},9233:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])}}]);
//# sourceMappingURL=26.89a82092.chunk.js.map