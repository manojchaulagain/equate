/*! For license information please see 927.6804a589.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkequate=self.webpackChunkequate||[]).push([[927],{2054:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},5927:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var a=s(2555),r=s(5043),l=s(7819),n=s(2054),o=s(2574),d=s(5746),i=s(6667),c=s(579);const m=e=>{let{db:t,userId:s,userEmail:m,userRole:u="user",isActive:x=!1}=e;const[b,p]=(0,r.useState)([]),[h,f]=(0,r.useState)(""),[g,w]=(0,r.useState)(!1),[j,y]=(0,r.useState)(null),[N,v]=(0,r.useState)(!0),[A,_]=(0,r.useState)(null),[S,k]=(0,r.useState)(""),[q,D]=(0,r.useState)(!1),C="admin"===u;(0,r.useEffect)(()=>{if(!t)return;const e="undefined"!==typeof __app_id?__app_id:"default-app-id",s="artifacts/".concat(e,"/public/data/questions"),r=(0,i.rJ)(t,s),l=(0,i.P)(r,(0,i.My)("createdAt","desc")),n=(0,i.aQ)(l,e=>{const t=e.docs.map(e=>(0,a.A)({id:e.id},e.data()));p(t),v(!1)},e=>{console.error("Error fetching questions:",e),y("Failed to load questions."),v(!1)});return()=>n()},[t]);return(0,c.jsxs)("div",{className:"relative overflow-hidden backdrop-blur-xl p-4 sm:p-6 rounded-b-3xl rounded-t-none shadow-[0_20px_60px_rgba(15,23,42,0.15)] -mt-[1px] ".concat(x?"bg-gradient-to-br from-blue-50/95 via-cyan-50/95 to-blue-50/95 border-l-2 border-r-2 border-b-2 border-blue-500/70":"bg-white/90 border border-white/70 border-t-0"),children:[(0,c.jsxs)("div",{className:"pointer-events-none absolute inset-0 opacity-60",children:[(0,c.jsx)("div",{className:"absolute -top-16 -right-10 w-48 h-48 bg-blue-200/50 blur-[90px]"}),(0,c.jsx)("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-cyan-200/50 blur-[80px]"})]}),(0,c.jsxs)("div",{className:"relative z-10",children:[(0,c.jsx)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 mb-6",children:(0,c.jsxs)("div",{children:[(0,c.jsxs)("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold tracking-tight bg-gradient-to-r from-blue-600 via-cyan-600 to-teal-600 bg-clip-text text-transparent pb-2 flex items-center gap-2",children:[(0,c.jsx)(o.A,{className:"text-blue-600",size:24}),"Questions & Concerns"]}),(0,c.jsx)("p",{className:"text-xs sm:text-sm font-medium text-slate-600 mt-2",children:C?"Answer questions from players or ask your own.":"Ask questions or share concerns. Admins will respond."})]})}),(!C||0===b.filter(e=>!e.answered).length)&&(0,c.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),h.trim()&&t){y(null),w(!0);try{const e="undefined"!==typeof __app_id?__app_id:"default-app-id",a="artifacts/".concat(e,"/public/data/questions"),r=(0,i.rJ)(t,a);await(0,i.gS)(r,{userId:s,userEmail:m,question:h.trim(),createdAt:i.Dc.now(),answered:!1}),f(""),y(null)}catch(a){console.error("Error submitting question:",a),y("Failed to submit question. Please try again.")}finally{w(!1)}}},className:"mb-6 p-4 sm:p-5 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl border-2 border-blue-200 shadow-md",children:[(0,c.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Your Question or Concern"}),(0,c.jsx)("textarea",{value:h,onChange:e=>{f(e.target.value),y(null)},placeholder:"Type your question or concern here...",className:"w-full p-3 border border-blue-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 resize-none min-h-[100px] text-sm",disabled:g,required:!0}),(0,c.jsxs)("button",{type:"submit",disabled:!h.trim()||g,className:"mt-3 w-full sm:w-auto bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-semibold py-2.5 px-6 rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all duration-300 shadow-lg hover:shadow-xl disabled:bg-gray-400 disabled:shadow-none transform hover:scale-105 disabled:transform-none flex items-center justify-center gap-2",children:[(0,c.jsx)(d.A,{className:"w-4 h-4"}),(0,c.jsx)("span",{children:"Submit Question"})]}),j&&(0,c.jsx)("p",{className:"mt-2 text-sm text-red-600 font-medium",children:j})]}),(0,c.jsx)("div",{className:"min-h-[300px]",children:N?(0,c.jsx)("div",{className:"text-center p-8 min-h-[300px] flex items-center justify-center",children:(0,c.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,c.jsxs)("div",{className:"relative w-12 h-12",children:[(0,c.jsx)("div",{className:"absolute inset-0 border-4 border-blue-200 rounded-full"}),(0,c.jsx)("div",{className:"absolute inset-0 border-4 border-transparent border-t-blue-600 rounded-full animate-spin"})]}),(0,c.jsx)("p",{className:"text-slate-600 font-medium",children:"Loading questions..."})]})}):0===b.length?(0,c.jsxs)("div",{className:"text-center p-8 bg-gradient-to-br from-slate-100 to-blue-50 rounded-2xl border-2 border-dashed border-blue-200 min-h-[300px] flex flex-col items-center justify-center",children:[(0,c.jsx)(o.A,{className:"mx-auto text-blue-400 mb-3",size:48}),(0,c.jsx)("p",{className:"text-slate-600 font-medium",children:"No questions yet. Be the first to ask!"})]}):(0,c.jsx)("div",{className:"space-y-4 max-h-[600px] overflow-y-auto custom-scrollbar",children:b.map(e=>(0,c.jsxs)("div",{className:"p-4 sm:p-5 rounded-2xl border-2 shadow-md ".concat(e.answered?"bg-gradient-to-br from-emerald-50 to-teal-50 border-emerald-300":"bg-gradient-to-br from-slate-50 to-blue-50 border-slate-300"),children:[(0,c.jsx)("div",{className:"flex items-start justify-between gap-3 mb-2",children:(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[(0,c.jsx)("span",{className:"text-xs sm:text-sm font-semibold text-slate-700",children:e.userEmail}),e.answered&&(0,c.jsx)("span",{className:"px-2 py-0.5 bg-emerald-500 text-white text-xs font-bold rounded-full",children:"Answered"}),!e.answered&&C&&(0,c.jsx)("span",{className:"px-2 py-0.5 bg-orange-500 text-white text-xs font-bold rounded-full",children:"Pending"})]}),(0,c.jsx)("p",{className:"text-sm sm:text-base text-slate-800 font-medium whitespace-pre-wrap",children:e.question}),(0,c.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:e.createdAt&&(e.createdAt.toDate?e.createdAt.toDate().toLocaleString():e.createdAt.seconds?new Date(1e3*e.createdAt.seconds).toLocaleString():(new Date).toLocaleString())})]})}),e.answered&&e.answer&&(0,c.jsxs)("div",{className:"mt-3 pt-3 border-t border-emerald-300",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,c.jsx)(l.A,{className:"w-4 h-4 text-emerald-600"}),(0,c.jsx)("span",{className:"text-xs font-semibold text-emerald-700",children:"Admin Response:"})]}),(0,c.jsx)("p",{className:"text-sm text-slate-700 whitespace-pre-wrap bg-white/60 p-2 rounded-xl",children:e.answer}),e.answeredAt&&(0,c.jsxs)("p",{className:"text-xs text-slate-500 mt-2",children:["Answered on ",e.answeredAt.toDate?e.answeredAt.toDate().toLocaleString():e.answeredAt.seconds?new Date(1e3*e.answeredAt.seconds).toLocaleString():(new Date).toLocaleString()]})]}),!e.answered&&C&&(0,c.jsx)("div",{className:"mt-3 pt-3 border-t border-orange-300",children:A===e.id?(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsx)("label",{className:"block text-sm font-semibold text-slate-700",children:"Your Answer"}),(0,c.jsx)("textarea",{value:S,onChange:e=>{k(e.target.value),y(null)},placeholder:"Type your answer here...",className:"w-full p-3 border border-orange-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition duration-150 resize-none min-h-[100px] text-sm",disabled:q}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsxs)("button",{onClick:()=>(async e=>{if(S.trim()&&t){y(null),D(!0);try{const s="undefined"!==typeof __app_id?__app_id:"default-app-id",a="artifacts/".concat(s,"/public/data/questions/").concat(e),r=(0,i.H9)(t,a);await(0,i.mZ)(r,{answer:S.trim(),answered:!0,answeredBy:m,answeredAt:i.Dc.now()}),k(""),_(null),y(null)}catch(s){console.error("Error submitting answer:",s),y("Failed to submit answer. Please try again.")}finally{D(!1)}}})(e.id),disabled:!S.trim()||q,className:"flex-1 bg-gradient-to-r from-emerald-500 to-teal-600 text-white font-semibold py-2 px-4 rounded-xl hover:from-emerald-600 hover:to-teal-700 transition-all duration-300 shadow-md hover:shadow-lg disabled:bg-gray-400 disabled:shadow-none flex items-center justify-center gap-2",children:[(0,c.jsx)(n.A,{className:"w-4 h-4"}),(0,c.jsx)("span",{children:"Submit Answer"})]}),(0,c.jsx)("button",{onClick:()=>{_(null),k(""),y(null)},className:"px-4 py-2 bg-gray-200 text-gray-800 font-semibold rounded-xl hover:bg-gray-300 transition-all duration-200",disabled:q,children:"Cancel"})]})]}):(0,c.jsxs)("button",{onClick:()=>{_(e.id),k(""),y(null)},className:"w-full bg-gradient-to-r from-orange-500 to-amber-600 text-white font-semibold py-2.5 px-4 rounded-xl hover:from-orange-600 hover:to-amber-700 transition-all duration-300 shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[(0,c.jsx)(o.A,{className:"w-4 h-4"}),(0,c.jsx)("span",{children:"Answer Question"})]})})]},e.id))})})]})]})}}}]);
//# sourceMappingURL=927.6804a589.chunk.js.map